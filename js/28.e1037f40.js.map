{"version":3,"file":"js/28.e1037f40.js","mappings":"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","sources":["webpack://snippets-admin/./src/libs/isotope.pkgd.js"],"sourcesContent":["/* eslint-disable */\r\n/*!\r\n * Isotope PACKAGED v3.0.6\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Isotope Commercial License for commercial use\r\n *\r\n * https://isotope.metafizzy.co\r\n * Copyright 2010-2018 Metafizzy\r\n */\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v2.0.1\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'jquery-bridget/jquery-bridget',[ 'jquery' ], function( jQuery ) {\r\n      return factory( window, jQuery );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('jquery')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.jQueryBridget = factory(\r\n      window,\r\n      window.jQuery\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, jQuery ) {\r\n  'use strict';\r\n\r\n// ----- utils ----- //\r\n\r\n  var arraySlice = Array.prototype.slice;\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\n  var console = window.console;\r\n  var logError = typeof console == 'undefined' ? function() {} :\r\n    function( message ) {\r\n      console.error( message );\r\n    };\r\n\r\n// ----- jQueryBridget ----- //\r\n\r\n  function jQueryBridget( namespace, PluginClass, $ ) {\r\n    $ = $ || jQuery || window.jQuery;\r\n    if ( !$ ) {\r\n      return;\r\n    }\r\n\r\n    // add option method -> $().plugin('option', {...})\r\n    if ( !PluginClass.prototype.option ) {\r\n      // option setter\r\n      PluginClass.prototype.option = function( opts ) {\r\n        // bail out if not an object\r\n        if ( !$.isPlainObject( opts ) ){\r\n          return;\r\n        }\r\n        this.options = $.extend( true, this.options, opts );\r\n      };\r\n    }\r\n\r\n    // make jQuery plugin\r\n    $.fn[ namespace ] = function( arg0 /*, arg1 */ ) {\r\n      if ( typeof arg0 == 'string' ) {\r\n        // method call $().plugin( 'methodName', { options } )\r\n        // shift arguments by 1\r\n        var args = arraySlice.call( arguments, 1 );\r\n        return methodCall( this, arg0, args );\r\n      }\r\n      // just $().plugin({ options })\r\n      plainCall( this, arg0 );\r\n      return this;\r\n    };\r\n\r\n    // $().plugin('methodName')\r\n    function methodCall( $elems, methodName, args ) {\r\n      var returnValue;\r\n      var pluginMethodStr = '$().' + namespace + '(\"' + methodName + '\")';\r\n\r\n      $elems.each( function( i, elem ) {\r\n        // get instance\r\n        var instance = $.data( elem, namespace );\r\n        if ( !instance ) {\r\n          logError( namespace + ' not initialized. Cannot call methods, i.e. ' +\r\n            pluginMethodStr );\r\n          return;\r\n        }\r\n\r\n        var method = instance[ methodName ];\r\n        if ( !method || methodName.charAt(0) == '_' ) {\r\n          logError( pluginMethodStr + ' is not a valid method' );\r\n          return;\r\n        }\r\n\r\n        // apply method, get return value\r\n        var value = method.apply( instance, args );\r\n        // set return value if value is returned, use only first value\r\n        returnValue = returnValue === undefined ? value : returnValue;\r\n      });\r\n\r\n      return returnValue !== undefined ? returnValue : $elems;\r\n    }\r\n\r\n    function plainCall( $elems, options ) {\r\n      $elems.each( function( i, elem ) {\r\n        var instance = $.data( elem, namespace );\r\n        if ( instance ) {\r\n          // set options & init\r\n          instance.option( options );\r\n          instance._init();\r\n        } else {\r\n          // initialize new instance\r\n          instance = new PluginClass( elem, options );\r\n          $.data( elem, namespace, instance );\r\n        }\r\n      });\r\n    }\r\n\r\n    updateJQuery( $ );\r\n\r\n  }\r\n\r\n// ----- updateJQuery ----- //\r\n\r\n// set $.bridget for v1 backwards compatibility\r\n  function updateJQuery( $ ) {\r\n    if ( !$ || ( $ && $.bridget ) ) {\r\n      return;\r\n    }\r\n    $.bridget = jQueryBridget;\r\n  }\r\n\r\n  updateJQuery( jQuery || window.jQuery );\r\n\r\n// -----  ----- //\r\n\r\n  return jQueryBridget;\r\n\r\n}));\r\n\r\n/**\r\n * EvEmitter v1.1.0\r\n * Lil' event emitter\r\n * MIT License\r\n */\r\n\r\n/* jshint unused: true, undef: true, strict: true */\r\n\r\n( function( global, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, window */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'ev-emitter/ev-emitter',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory();\r\n  } else {\r\n    // Browser globals\r\n    global.EvEmitter = factory();\r\n  }\r\n\r\n}( typeof window != 'undefined' ? window : this, function() {\r\n\r\n\r\n\r\n  function EvEmitter() {}\r\n\r\n  var proto = EvEmitter.prototype;\r\n\r\n  proto.on = function( eventName, listener ) {\r\n    if ( !eventName || !listener ) {\r\n      return;\r\n    }\r\n    // set events hash\r\n    var events = this._events = this._events || {};\r\n    // set listeners array\r\n    var listeners = events[ eventName ] = events[ eventName ] || [];\r\n    // only add once\r\n    if ( listeners.indexOf( listener ) == -1 ) {\r\n      listeners.push( listener );\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  proto.once = function( eventName, listener ) {\r\n    if ( !eventName || !listener ) {\r\n      return;\r\n    }\r\n    // add event\r\n    this.on( eventName, listener );\r\n    // set once flag\r\n    // set onceEvents hash\r\n    var onceEvents = this._onceEvents = this._onceEvents || {};\r\n    // set onceListeners object\r\n    var onceListeners = onceEvents[ eventName ] = onceEvents[ eventName ] || {};\r\n    // set flag\r\n    onceListeners[ listener ] = true;\r\n\r\n    return this;\r\n  };\r\n\r\n  proto.off = function( eventName, listener ) {\r\n    var listeners = this._events && this._events[ eventName ];\r\n    if ( !listeners || !listeners.length ) {\r\n      return;\r\n    }\r\n    var index = listeners.indexOf( listener );\r\n    if ( index != -1 ) {\r\n      listeners.splice( index, 1 );\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  proto.emitEvent = function( eventName, args ) {\r\n    var listeners = this._events && this._events[ eventName ];\r\n    if ( !listeners || !listeners.length ) {\r\n      return;\r\n    }\r\n    // copy over to avoid interference if .off() in listener\r\n    listeners = listeners.slice(0);\r\n    args = args || [];\r\n    // once stuff\r\n    var onceListeners = this._onceEvents && this._onceEvents[ eventName ];\r\n\r\n    for ( var i=0; i < listeners.length; i++ ) {\r\n      var listener = listeners[i]\r\n      var isOnce = onceListeners && onceListeners[ listener ];\r\n      if ( isOnce ) {\r\n        // remove listener\r\n        // remove before trigger to prevent recursion\r\n        this.off( eventName, listener );\r\n        // unset once flag\r\n        delete onceListeners[ listener ];\r\n      }\r\n      // trigger listener\r\n      listener.apply( this, args );\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  proto.allOff = function() {\r\n    delete this._events;\r\n    delete this._onceEvents;\r\n  };\r\n\r\n  return EvEmitter;\r\n\r\n}));\r\n\r\n/*!\r\n * getSize v2.0.3\r\n * measure size of elements\r\n * MIT license\r\n */\r\n\r\n/* jshint browser: true, strict: true, undef: true, unused: true */\r\n/* globals console: false */\r\n\r\n( function( window, factory ) {\r\n  /* jshint strict: false */ /* globals define, module */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'get-size/get-size',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.getSize = factory();\r\n  }\r\n\r\n})( window, function factory() {\r\n  'use strict';\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n// get a number from a string, not a percentage\r\n  function getStyleSize( value ) {\r\n    var num = parseFloat( value );\r\n    // not a percent like '100%', and a number\r\n    var isValid = value.indexOf('%') == -1 && !isNaN( num );\r\n    return isValid && num;\r\n  }\r\n\r\n  function noop() {}\r\n\r\n  var logError = typeof console == 'undefined' ? noop :\r\n    function( message ) {\r\n      console.error( message );\r\n    };\r\n\r\n// -------------------------- measurements -------------------------- //\r\n\r\n  var measurements = [\r\n    'paddingLeft',\r\n    'paddingRight',\r\n    'paddingTop',\r\n    'paddingBottom',\r\n    'marginLeft',\r\n    'marginRight',\r\n    'marginTop',\r\n    'marginBottom',\r\n    'borderLeftWidth',\r\n    'borderRightWidth',\r\n    'borderTopWidth',\r\n    'borderBottomWidth'\r\n  ];\r\n\r\n  var measurementsLength = measurements.length;\r\n\r\n  function getZeroSize() {\r\n    var size = {\r\n      width: 0,\r\n      height: 0,\r\n      innerWidth: 0,\r\n      innerHeight: 0,\r\n      outerWidth: 0,\r\n      outerHeight: 0\r\n    };\r\n    for ( var i=0; i < measurementsLength; i++ ) {\r\n      var measurement = measurements[i];\r\n      size[ measurement ] = 0;\r\n    }\r\n    return size;\r\n  }\r\n\r\n// -------------------------- getStyle -------------------------- //\r\n\r\n  /**\r\n   * getStyle, get style of element, check for Firefox bug\r\n   * https://bugzilla.mozilla.org/show_bug.cgi?id=548397\r\n   */\r\n  function getStyle( elem ) {\r\n    var style = getComputedStyle( elem );\r\n    if ( !style ) {\r\n      logError( 'Style returned ' + style +\r\n        '. Are you running this code in a hidden iframe on Firefox? ' +\r\n        'See https://bit.ly/getsizebug1' );\r\n    }\r\n    return style;\r\n  }\r\n\r\n// -------------------------- setup -------------------------- //\r\n\r\n  var isSetup = false;\r\n\r\n  var isBoxSizeOuter;\r\n\r\n  /**\r\n   * setup\r\n   * check isBoxSizerOuter\r\n   * do on first getSize() rather than on page load for Firefox bug\r\n   */\r\n  function setup() {\r\n    // setup once\r\n    if ( isSetup ) {\r\n      return;\r\n    }\r\n    isSetup = true;\r\n\r\n    // -------------------------- box sizing -------------------------- //\r\n\r\n    /**\r\n     * Chrome & Safari measure the outer-width on style.width on border-box elems\r\n     * IE11 & Firefox<29 measures the inner-width\r\n     */\r\n    var div = document.createElement('div');\r\n    div.style.width = '200px';\r\n    div.style.padding = '1px 2px 3px 4px';\r\n    div.style.borderStyle = 'solid';\r\n    div.style.borderWidth = '1px 2px 3px 4px';\r\n    div.style.boxSizing = 'border-box';\r\n\r\n    var body = document.body || document.documentElement;\r\n    body.appendChild( div );\r\n    var style = getStyle( div );\r\n    // round value for browser zoom. desandro/masonry#928\r\n    isBoxSizeOuter = Math.round( getStyleSize( style.width ) ) == 200;\r\n    getSize.isBoxSizeOuter = isBoxSizeOuter;\r\n\r\n    body.removeChild( div );\r\n  }\r\n\r\n// -------------------------- getSize -------------------------- //\r\n\r\n  function getSize( elem ) {\r\n    setup();\r\n\r\n    // use querySeletor if elem is string\r\n    if ( typeof elem == 'string' ) {\r\n      elem = document.querySelector( elem );\r\n    }\r\n\r\n    // do not proceed on non-objects\r\n    if ( !elem || typeof elem != 'object' || !elem.nodeType ) {\r\n      return;\r\n    }\r\n\r\n    var style = getStyle( elem );\r\n\r\n    // if hidden, everything is 0\r\n    if ( style.display == 'none' ) {\r\n      return getZeroSize();\r\n    }\r\n\r\n    var size = {};\r\n    size.width = elem.offsetWidth;\r\n    size.height = elem.offsetHeight;\r\n\r\n    var isBorderBox = size.isBorderBox = style.boxSizing == 'border-box';\r\n\r\n    // get all measurements\r\n    for ( var i=0; i < measurementsLength; i++ ) {\r\n      var measurement = measurements[i];\r\n      var value = style[ measurement ];\r\n      var num = parseFloat( value );\r\n      // any 'auto', 'medium' value will be 0\r\n      size[ measurement ] = !isNaN( num ) ? num : 0;\r\n    }\r\n\r\n    var paddingWidth = size.paddingLeft + size.paddingRight;\r\n    var paddingHeight = size.paddingTop + size.paddingBottom;\r\n    var marginWidth = size.marginLeft + size.marginRight;\r\n    var marginHeight = size.marginTop + size.marginBottom;\r\n    var borderWidth = size.borderLeftWidth + size.borderRightWidth;\r\n    var borderHeight = size.borderTopWidth + size.borderBottomWidth;\r\n\r\n    var isBorderBoxSizeOuter = isBorderBox && isBoxSizeOuter;\r\n\r\n    // overwrite width and height if we can get it from style\r\n    var styleWidth = getStyleSize( style.width );\r\n    if ( styleWidth !== false ) {\r\n      size.width = styleWidth +\r\n        // add padding and border unless it's already including it\r\n        ( isBorderBoxSizeOuter ? 0 : paddingWidth + borderWidth );\r\n    }\r\n\r\n    var styleHeight = getStyleSize( style.height );\r\n    if ( styleHeight !== false ) {\r\n      size.height = styleHeight +\r\n        // add padding and border unless it's already including it\r\n        ( isBorderBoxSizeOuter ? 0 : paddingHeight + borderHeight );\r\n    }\r\n\r\n    size.innerWidth = size.width - ( paddingWidth + borderWidth );\r\n    size.innerHeight = size.height - ( paddingHeight + borderHeight );\r\n\r\n    size.outerWidth = size.width + marginWidth;\r\n    size.outerHeight = size.height + marginHeight;\r\n\r\n    return size;\r\n  }\r\n\r\n  return getSize;\r\n\r\n});\r\n\r\n/**\r\n * matchesSelector v2.0.2\r\n * matchesSelector( element, '.selector' )\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, strict: true, undef: true, unused: true */\r\n\r\n( function( window, factory ) {\r\n  /*global define: false, module: false */\r\n  'use strict';\r\n  // universal module definition\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'desandro-matches-selector/matches-selector',factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory();\r\n  } else {\r\n    // browser global\r\n    window.matchesSelector = factory();\r\n  }\r\n\r\n}( window, function factory() {\r\n  'use strict';\r\n\r\n  var matchesMethod = ( function() {\r\n    var ElemProto = window.Element.prototype;\r\n    // check for the standard method name first\r\n    if ( ElemProto.matches ) {\r\n      return 'matches';\r\n    }\r\n    // check un-prefixed\r\n    if ( ElemProto.matchesSelector ) {\r\n      return 'matchesSelector';\r\n    }\r\n    // check vendor prefixes\r\n    var prefixes = [ 'webkit', 'moz', 'ms', 'o' ];\r\n\r\n    for ( var i=0; i < prefixes.length; i++ ) {\r\n      var prefix = prefixes[i];\r\n      var method = prefix + 'MatchesSelector';\r\n      if ( ElemProto[ method ] ) {\r\n        return method;\r\n      }\r\n    }\r\n  })();\r\n\r\n  return function matchesSelector( elem, selector ) {\r\n    return elem[ matchesMethod ]( selector );\r\n  };\r\n\r\n}));\r\n\r\n/**\r\n * Fizzy UI utils v2.0.7\r\n * MIT license\r\n */\r\n\r\n/*jshint browser: true, undef: true, unused: true, strict: true */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /*jshint strict: false */ /*globals define, module, require */\r\n\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'fizzy-ui-utils/utils',[\r\n      'desandro-matches-selector/matches-selector'\r\n    ], function( matchesSelector ) {\r\n      return factory( window, matchesSelector );\r\n    });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('desandro-matches-selector')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.fizzyUIUtils = factory(\r\n      window,\r\n      window.matchesSelector\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, matchesSelector ) {\r\n\r\n\r\n\r\n  var utils = {};\r\n\r\n// ----- extend ----- //\r\n\r\n// extends objects\r\n  utils.extend = function( a, b ) {\r\n    for ( var prop in b ) {\r\n      a[ prop ] = b[ prop ];\r\n    }\r\n    return a;\r\n  };\r\n\r\n// ----- modulo ----- //\r\n\r\n  utils.modulo = function( num, div ) {\r\n    return ( ( num % div ) + div ) % div;\r\n  };\r\n\r\n// ----- makeArray ----- //\r\n\r\n  var arraySlice = Array.prototype.slice;\r\n\r\n// turn element or nodeList into an array\r\n  utils.makeArray = function( obj ) {\r\n    if ( Array.isArray( obj ) ) {\r\n      // use object if already an array\r\n      return obj;\r\n    }\r\n    // return empty array if undefined or null. #6\r\n    if ( obj === null || obj === undefined ) {\r\n      return [];\r\n    }\r\n\r\n    var isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\r\n    if ( isArrayLike ) {\r\n      // convert nodeList to array\r\n      return arraySlice.call( obj );\r\n    }\r\n\r\n    // array of single index\r\n    return [ obj ];\r\n  };\r\n\r\n// ----- removeFrom ----- //\r\n\r\n  utils.removeFrom = function( ary, obj ) {\r\n    var index = ary.indexOf( obj );\r\n    if ( index != -1 ) {\r\n      ary.splice( index, 1 );\r\n    }\r\n  };\r\n\r\n// ----- getParent ----- //\r\n\r\n  utils.getParent = function( elem, selector ) {\r\n    while ( elem.parentNode && elem != document.body ) {\r\n      elem = elem.parentNode;\r\n      if ( matchesSelector( elem, selector ) ) {\r\n        return elem;\r\n      }\r\n    }\r\n  };\r\n\r\n// ----- getQueryElement ----- //\r\n\r\n// use element as selector string\r\n  utils.getQueryElement = function( elem ) {\r\n    if ( typeof elem == 'string' ) {\r\n      return document.querySelector( elem );\r\n    }\r\n    return elem;\r\n  };\r\n\r\n// ----- handleEvent ----- //\r\n\r\n// enable .ontype to trigger from .addEventListener( elem, 'type' )\r\n  utils.handleEvent = function( event ) {\r\n    var method = 'on' + event.type;\r\n    if ( this[ method ] ) {\r\n      this[ method ]( event );\r\n    }\r\n  };\r\n\r\n// ----- filterFindElements ----- //\r\n\r\n  utils.filterFindElements = function( elems, selector ) {\r\n    // make array of elems\r\n    elems = utils.makeArray( elems );\r\n    var ffElems = [];\r\n\r\n    elems.forEach( function( elem ) {\r\n      // check that elem is an actual element\r\n      if ( !( elem instanceof HTMLElement ) ) {\r\n        return;\r\n      }\r\n      // add elem if no selector\r\n      if ( !selector ) {\r\n        ffElems.push( elem );\r\n        return;\r\n      }\r\n      // filter & find items if we have a selector\r\n      // filter\r\n      if ( matchesSelector( elem, selector ) ) {\r\n        ffElems.push( elem );\r\n      }\r\n      // find children\r\n      var childElems = elem.querySelectorAll( selector );\r\n      // concat childElems to filterFound array\r\n      for ( var i=0; i < childElems.length; i++ ) {\r\n        ffElems.push( childElems[i] );\r\n      }\r\n    });\r\n\r\n    return ffElems;\r\n  };\r\n\r\n// ----- debounceMethod ----- //\r\n\r\n  utils.debounceMethod = function( _class, methodName, threshold ) {\r\n    threshold = threshold || 100;\r\n    // original method\r\n    var method = _class.prototype[ methodName ];\r\n    var timeoutName = methodName + 'Timeout';\r\n\r\n    _class.prototype[ methodName ] = function() {\r\n      var timeout = this[ timeoutName ];\r\n      clearTimeout( timeout );\r\n\r\n      var args = arguments;\r\n      var _this = this;\r\n      this[ timeoutName ] = setTimeout( function() {\r\n        method.apply( _this, args );\r\n        delete _this[ timeoutName ];\r\n      }, threshold );\r\n    };\r\n  };\r\n\r\n// ----- docReady ----- //\r\n\r\n  utils.docReady = function( callback ) {\r\n    var readyState = document.readyState;\r\n    if ( readyState == 'complete' || readyState == 'interactive' ) {\r\n      // do async to allow for other scripts to run. metafizzy/flickity#441\r\n      setTimeout( callback );\r\n    } else {\r\n      document.addEventListener( 'DOMContentLoaded', callback );\r\n    }\r\n  };\r\n\r\n// ----- htmlInit ----- //\r\n\r\n// http://jamesroberts.name/blog/2010/02/22/string-functions-for-javascript-trim-to-camel-case-to-dashed-and-to-underscore/\r\n  utils.toDashed = function( str ) {\r\n    return str.replace( /(.)([A-Z])/g, function( match, $1, $2 ) {\r\n      return $1 + '-' + $2;\r\n    }).toLowerCase();\r\n  };\r\n\r\n  var console = window.console;\r\n  /**\r\n   * allow user to initialize classes via [data-namespace] or .js-namespace class\r\n   * htmlInit( Widget, 'widgetName' )\r\n   * options are parsed from data-namespace-options\r\n   */\r\n  utils.htmlInit = function( WidgetClass, namespace ) {\r\n    utils.docReady( function() {\r\n      var dashedNamespace = utils.toDashed( namespace );\r\n      var dataAttr = 'data-' + dashedNamespace;\r\n      var dataAttrElems = document.querySelectorAll( '[' + dataAttr + ']' );\r\n      var jsDashElems = document.querySelectorAll( '.js-' + dashedNamespace );\r\n      var elems = utils.makeArray( dataAttrElems )\r\n        .concat( utils.makeArray( jsDashElems ) );\r\n      var dataOptionsAttr = dataAttr + '-options';\r\n      var jQuery = window.jQuery;\r\n\r\n      elems.forEach( function( elem ) {\r\n        var attr = elem.getAttribute( dataAttr ) ||\r\n          elem.getAttribute( dataOptionsAttr );\r\n        var options;\r\n        try {\r\n          options = attr && JSON.parse( attr );\r\n        } catch ( error ) {\r\n          // log error, do not initialize\r\n          if ( console ) {\r\n            console.error( 'Error parsing ' + dataAttr + ' on ' + elem.className +\r\n              ': ' + error );\r\n          }\r\n          return;\r\n        }\r\n        // initialize\r\n        var instance = new WidgetClass( elem, options );\r\n        // make available via $().data('namespace')\r\n        if ( jQuery ) {\r\n          jQuery.data( elem, namespace, instance );\r\n        }\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n// -----  ----- //\r\n\r\n  return utils;\r\n\r\n}));\r\n\r\n/**\r\n * Outlayer Item\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'outlayer/item',[\r\n        'ev-emitter/ev-emitter',\r\n        'get-size/get-size'\r\n      ],\r\n      factory\r\n    );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory(\r\n      require('ev-emitter'),\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Outlayer = {};\r\n    window.Outlayer.Item = factory(\r\n      window.EvEmitter,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( EvEmitter, getSize ) {\r\n  'use strict';\r\n\r\n// ----- helpers ----- //\r\n\r\n  function isEmptyObj( obj ) {\r\n    for ( var prop in obj ) {\r\n      return false;\r\n    }\r\n    prop = null;\r\n    return true;\r\n  }\r\n\r\n// -------------------------- CSS3 support -------------------------- //\r\n\r\n\r\n  var docElemStyle = document.documentElement.style;\r\n\r\n  var transitionProperty = typeof docElemStyle.transition == 'string' ?\r\n    'transition' : 'WebkitTransition';\r\n  var transformProperty = typeof docElemStyle.transform == 'string' ?\r\n    'transform' : 'WebkitTransform';\r\n\r\n  var transitionEndEvent = {\r\n    WebkitTransition: 'webkitTransitionEnd',\r\n    transition: 'transitionend'\r\n  }[ transitionProperty ];\r\n\r\n// cache all vendor properties that could have vendor prefix\r\n  var vendorProperties = {\r\n    transform: transformProperty,\r\n    transition: transitionProperty,\r\n    transitionDuration: transitionProperty + 'Duration',\r\n    transitionProperty: transitionProperty + 'Property',\r\n    transitionDelay: transitionProperty + 'Delay'\r\n  };\r\n\r\n// -------------------------- Item -------------------------- //\r\n\r\n  function Item( element, layout ) {\r\n    if ( !element ) {\r\n      return;\r\n    }\r\n\r\n    this.element = element;\r\n    // parent layout class, i.e. Masonry, Isotope, or Packery\r\n    this.layout = layout;\r\n    this.position = {\r\n      x: 0,\r\n      y: 0\r\n    };\r\n\r\n    this._create();\r\n  }\r\n\r\n// inherit EvEmitter\r\n  var proto = Item.prototype = Object.create( EvEmitter.prototype );\r\n  proto.constructor = Item;\r\n\r\n  proto._create = function() {\r\n    // transition objects\r\n    this._transn = {\r\n      ingProperties: {},\r\n      clean: {},\r\n      onEnd: {}\r\n    };\r\n\r\n    this.css({\r\n      position: 'absolute'\r\n    });\r\n  };\r\n\r\n// trigger specified handler for event type\r\n  proto.handleEvent = function( event ) {\r\n    var method = 'on' + event.type;\r\n    if ( this[ method ] ) {\r\n      this[ method ]( event );\r\n    }\r\n  };\r\n\r\n  proto.getSize = function() {\r\n    this.size = getSize( this.element );\r\n  };\r\n\r\n  /**\r\n   * apply CSS styles to element\r\n   * @param {Object} style\r\n   */\r\n  proto.css = function( style ) {\r\n    var elemStyle = this.element.style;\r\n\r\n    for ( var prop in style ) {\r\n      // use vendor property if available\r\n      var supportedProp = vendorProperties[ prop ] || prop;\r\n      elemStyle[ supportedProp ] = style[ prop ];\r\n    }\r\n  };\r\n\r\n  // measure position, and sets it\r\n  proto.getPosition = function() {\r\n    var style = getComputedStyle( this.element );\r\n    var isOriginLeft = this.layout._getOption('originLeft');\r\n    var isOriginTop = this.layout._getOption('originTop');\r\n    var xValue = style[ isOriginLeft ? 'left' : 'right' ];\r\n    var yValue = style[ isOriginTop ? 'top' : 'bottom' ];\r\n    var x = parseFloat( xValue );\r\n    var y = parseFloat( yValue );\r\n    // convert percent to pixels\r\n    var layoutSize = this.layout.size;\r\n    if ( xValue.indexOf('%') != -1 ) {\r\n      x = ( x / 100 ) * layoutSize.width;\r\n    }\r\n    if ( yValue.indexOf('%') != -1 ) {\r\n      y = ( y / 100 ) * layoutSize.height;\r\n    }\r\n    // clean up 'auto' or other non-integer values\r\n    x = isNaN( x ) ? 0 : x;\r\n    y = isNaN( y ) ? 0 : y;\r\n    // remove padding from measurement\r\n    x -= isOriginLeft ? layoutSize.paddingLeft : layoutSize.paddingRight;\r\n    y -= isOriginTop ? layoutSize.paddingTop : layoutSize.paddingBottom;\r\n\r\n    this.position.x = x;\r\n    this.position.y = y;\r\n  };\r\n\r\n// set settled position, apply padding\r\n  proto.layoutPosition = function() {\r\n    var layoutSize = this.layout.size;\r\n    var style = {};\r\n    var isOriginLeft = this.layout._getOption('originLeft');\r\n    var isOriginTop = this.layout._getOption('originTop');\r\n\r\n    // x\r\n    var xPadding = isOriginLeft ? 'paddingLeft' : 'paddingRight';\r\n    var xProperty = isOriginLeft ? 'left' : 'right';\r\n    var xResetProperty = isOriginLeft ? 'right' : 'left';\r\n\r\n    var x = this.position.x + layoutSize[ xPadding ];\r\n    // set in percentage or pixels\r\n    style[ xProperty ] = this.getXValue( x );\r\n    // reset other property\r\n    style[ xResetProperty ] = '';\r\n\r\n    // y\r\n    var yPadding = isOriginTop ? 'paddingTop' : 'paddingBottom';\r\n    var yProperty = isOriginTop ? 'top' : 'bottom';\r\n    var yResetProperty = isOriginTop ? 'bottom' : 'top';\r\n\r\n    var y = this.position.y + layoutSize[ yPadding ];\r\n    // set in percentage or pixels\r\n    style[ yProperty ] = this.getYValue( y );\r\n    // reset other property\r\n    style[ yResetProperty ] = '';\r\n\r\n    this.css( style );\r\n    this.emitEvent( 'layout', [ this ] );\r\n  };\r\n\r\n  proto.getXValue = function( x ) {\r\n    var isHorizontal = this.layout._getOption('horizontal');\r\n    return this.layout.options.percentPosition && !isHorizontal ?\r\n      ( ( x / this.layout.size.width ) * 100 ) + '%' : x + 'px';\r\n  };\r\n\r\n  proto.getYValue = function( y ) {\r\n    var isHorizontal = this.layout._getOption('horizontal');\r\n    return this.layout.options.percentPosition && isHorizontal ?\r\n      ( ( y / this.layout.size.height ) * 100 ) + '%' : y + 'px';\r\n  };\r\n\r\n  proto._transitionTo = function( x, y ) {\r\n    this.getPosition();\r\n    // get current x & y from top/left\r\n    var curX = this.position.x;\r\n    var curY = this.position.y;\r\n\r\n    var didNotMove = x == this.position.x && y == this.position.y;\r\n\r\n    // save end position\r\n    this.setPosition( x, y );\r\n\r\n    // if did not move and not transitioning, just go to layout\r\n    if ( didNotMove && !this.isTransitioning ) {\r\n      this.layoutPosition();\r\n      return;\r\n    }\r\n\r\n    var transX = x - curX;\r\n    var transY = y - curY;\r\n    var transitionStyle = {};\r\n    transitionStyle.transform = this.getTranslate( transX, transY );\r\n\r\n    this.transition({\r\n      to: transitionStyle,\r\n      onTransitionEnd: {\r\n        transform: this.layoutPosition\r\n      },\r\n      isCleaning: true\r\n    });\r\n  };\r\n\r\n  proto.getTranslate = function( x, y ) {\r\n    // flip cooridinates if origin on right or bottom\r\n    var isOriginLeft = this.layout._getOption('originLeft');\r\n    var isOriginTop = this.layout._getOption('originTop');\r\n    x = isOriginLeft ? x : -x;\r\n    y = isOriginTop ? y : -y;\r\n    return 'translate3d(' + x + 'px, ' + y + 'px, 0)';\r\n  };\r\n\r\n// non transition + transform support\r\n  proto.goTo = function( x, y ) {\r\n    this.setPosition( x, y );\r\n    this.layoutPosition();\r\n  };\r\n\r\n  proto.moveTo = proto._transitionTo;\r\n\r\n  proto.setPosition = function( x, y ) {\r\n    this.position.x = parseFloat( x );\r\n    this.position.y = parseFloat( y );\r\n  };\r\n\r\n// ----- transition ----- //\r\n\r\n  /**\r\n   * @param {Object} style - CSS\r\n   * @param {Function} onTransitionEnd\r\n   */\r\n\r\n// non transition, just trigger callback\r\n  proto._nonTransition = function( args ) {\r\n    this.css( args.to );\r\n    if ( args.isCleaning ) {\r\n      this._removeStyles( args.to );\r\n    }\r\n    for ( var prop in args.onTransitionEnd ) {\r\n      args.onTransitionEnd[ prop ].call( this );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * proper transition\r\n   * @param {Object} args - arguments\r\n   *   @param {Object} to - style to transition to\r\n   *   @param {Object} from - style to start transition from\r\n   *   @param {Boolean} isCleaning - removes transition styles after transition\r\n   *   @param {Function} onTransitionEnd - callback\r\n   */\r\n  proto.transition = function( args ) {\r\n    // redirect to nonTransition if no transition duration\r\n    if ( !parseFloat( this.layout.options.transitionDuration ) ) {\r\n      this._nonTransition( args );\r\n      return;\r\n    }\r\n\r\n    var _transition = this._transn;\r\n    // keep track of onTransitionEnd callback by css property\r\n    for ( var prop in args.onTransitionEnd ) {\r\n      _transition.onEnd[ prop ] = args.onTransitionEnd[ prop ];\r\n    }\r\n    // keep track of properties that are transitioning\r\n    for ( prop in args.to ) {\r\n      _transition.ingProperties[ prop ] = true;\r\n      // keep track of properties to clean up when transition is done\r\n      if ( args.isCleaning ) {\r\n        _transition.clean[ prop ] = true;\r\n      }\r\n    }\r\n\r\n    // set from styles\r\n    if ( args.from ) {\r\n      this.css( args.from );\r\n      // force redraw. http://blog.alexmaccaw.com/css-transitions\r\n      var h = this.element.offsetHeight;\r\n      // hack for JSHint to hush about unused var\r\n      h = null;\r\n    }\r\n    // enable transition\r\n    this.enableTransition( args.to );\r\n    // set styles that are transitioning\r\n    this.css( args.to );\r\n\r\n    this.isTransitioning = true;\r\n\r\n  };\r\n\r\n// dash before all cap letters, including first for\r\n// WebkitTransform => -webkit-transform\r\n  function toDashedAll( str ) {\r\n    return str.replace( /([A-Z])/g, function( $1 ) {\r\n      return '-' + $1.toLowerCase();\r\n    });\r\n  }\r\n\r\n  var transitionProps = 'opacity,' + toDashedAll( transformProperty );\r\n\r\n  proto.enableTransition = function(/* style */) {\r\n    // HACK changing transitionProperty during a transition\r\n    // will cause transition to jump\r\n    if ( this.isTransitioning ) {\r\n      return;\r\n    }\r\n\r\n    // make `transition: foo, bar, baz` from style object\r\n    // HACK un-comment this when enableTransition can work\r\n    // while a transition is happening\r\n    // var transitionValues = [];\r\n    // for ( var prop in style ) {\r\n    //   // dash-ify camelCased properties like WebkitTransition\r\n    //   prop = vendorProperties[ prop ] || prop;\r\n    //   transitionValues.push( toDashedAll( prop ) );\r\n    // }\r\n    // munge number to millisecond, to match stagger\r\n    var duration = this.layout.options.transitionDuration;\r\n    duration = typeof duration == 'number' ? duration + 'ms' : duration;\r\n    // enable transition styles\r\n    this.css({\r\n      transitionProperty: transitionProps,\r\n      transitionDuration: duration,\r\n      transitionDelay: this.staggerDelay || 0\r\n    });\r\n    // listen for transition end event\r\n    this.element.addEventListener( transitionEndEvent, this, false );\r\n  };\r\n\r\n// ----- events ----- //\r\n\r\n  proto.onwebkitTransitionEnd = function( event ) {\r\n    this.ontransitionend( event );\r\n  };\r\n\r\n  proto.onotransitionend = function( event ) {\r\n    this.ontransitionend( event );\r\n  };\r\n\r\n// properties that I munge to make my life easier\r\n  var dashedVendorProperties = {\r\n    '-webkit-transform': 'transform'\r\n  };\r\n\r\n  proto.ontransitionend = function( event ) {\r\n    // disregard bubbled events from children\r\n    if ( event.target !== this.element ) {\r\n      return;\r\n    }\r\n    var _transition = this._transn;\r\n    // get property name of transitioned property, convert to prefix-free\r\n    var propertyName = dashedVendorProperties[ event.propertyName ] || event.propertyName;\r\n\r\n    // remove property that has completed transitioning\r\n    delete _transition.ingProperties[ propertyName ];\r\n    // check if any properties are still transitioning\r\n    if ( isEmptyObj( _transition.ingProperties ) ) {\r\n      // all properties have completed transitioning\r\n      this.disableTransition();\r\n    }\r\n    // clean style\r\n    if ( propertyName in _transition.clean ) {\r\n      // clean up style\r\n      this.element.style[ event.propertyName ] = '';\r\n      delete _transition.clean[ propertyName ];\r\n    }\r\n    // trigger onTransitionEnd callback\r\n    if ( propertyName in _transition.onEnd ) {\r\n      var onTransitionEnd = _transition.onEnd[ propertyName ];\r\n      onTransitionEnd.call( this );\r\n      delete _transition.onEnd[ propertyName ];\r\n    }\r\n\r\n    this.emitEvent( 'transitionEnd', [ this ] );\r\n  };\r\n\r\n  proto.disableTransition = function() {\r\n    this.removeTransitionStyles();\r\n    this.element.removeEventListener( transitionEndEvent, this, false );\r\n    this.isTransitioning = false;\r\n  };\r\n\r\n  /**\r\n   * removes style property from element\r\n   * @param {Object} style\r\n   **/\r\n  proto._removeStyles = function( style ) {\r\n    // clean up transition styles\r\n    var cleanStyle = {};\r\n    for ( var prop in style ) {\r\n      cleanStyle[ prop ] = '';\r\n    }\r\n    this.css( cleanStyle );\r\n  };\r\n\r\n  var cleanTransitionStyle = {\r\n    transitionProperty: '',\r\n    transitionDuration: '',\r\n    transitionDelay: ''\r\n  };\r\n\r\n  proto.removeTransitionStyles = function() {\r\n    // remove transition\r\n    this.css( cleanTransitionStyle );\r\n  };\r\n\r\n// ----- stagger ----- //\r\n\r\n  proto.stagger = function( delay ) {\r\n    delay = isNaN( delay ) ? 0 : delay;\r\n    this.staggerDelay = delay + 'ms';\r\n  };\r\n\r\n// ----- show/hide/remove ----- //\r\n\r\n// remove element from DOM\r\n  proto.removeElem = function() {\r\n    this.element.parentNode.removeChild( this.element );\r\n    // remove display: none\r\n    this.css({ display: '' });\r\n    this.emitEvent( 'remove', [ this ] );\r\n  };\r\n\r\n  proto.remove = function() {\r\n    // just remove element if no transition support or no transition\r\n    if ( !transitionProperty || !parseFloat( this.layout.options.transitionDuration ) ) {\r\n      this.removeElem();\r\n      return;\r\n    }\r\n\r\n    // start transition\r\n    this.once( 'transitionEnd', function() {\r\n      this.removeElem();\r\n    });\r\n    this.hide();\r\n  };\r\n\r\n  proto.reveal = function() {\r\n    delete this.isHidden;\r\n    // remove display: none\r\n    this.css({ display: '' });\r\n\r\n    var options = this.layout.options;\r\n\r\n    var onTransitionEnd = {};\r\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('visibleStyle');\r\n    onTransitionEnd[ transitionEndProperty ] = this.onRevealTransitionEnd;\r\n\r\n    this.transition({\r\n      from: options.hiddenStyle,\r\n      to: options.visibleStyle,\r\n      isCleaning: true,\r\n      onTransitionEnd: onTransitionEnd\r\n    });\r\n  };\r\n\r\n  proto.onRevealTransitionEnd = function() {\r\n    // check if still visible\r\n    // during transition, item may have been hidden\r\n    if ( !this.isHidden ) {\r\n      this.emitEvent('reveal');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * get style property use for hide/reveal transition end\r\n   * @param {String} styleProperty - hiddenStyle/visibleStyle\r\n   * @returns {String}\r\n   */\r\n  proto.getHideRevealTransitionEndProperty = function( styleProperty ) {\r\n    var optionStyle = this.layout.options[ styleProperty ];\r\n    // use opacity\r\n    if ( optionStyle.opacity ) {\r\n      return 'opacity';\r\n    }\r\n    // get first property\r\n    for ( var prop in optionStyle ) {\r\n      return prop;\r\n    }\r\n  };\r\n\r\n  proto.hide = function() {\r\n    // set flag\r\n    this.isHidden = true;\r\n    // remove display: none\r\n    this.css({ display: '' });\r\n\r\n    var options = this.layout.options;\r\n\r\n    var onTransitionEnd = {};\r\n    var transitionEndProperty = this.getHideRevealTransitionEndProperty('hiddenStyle');\r\n    onTransitionEnd[ transitionEndProperty ] = this.onHideTransitionEnd;\r\n\r\n    this.transition({\r\n      from: options.visibleStyle,\r\n      to: options.hiddenStyle,\r\n      // keep hidden stuff hidden\r\n      isCleaning: true,\r\n      onTransitionEnd: onTransitionEnd\r\n    });\r\n  };\r\n\r\n  proto.onHideTransitionEnd = function() {\r\n    // check if still hidden\r\n    // during transition, item may have been un-hidden\r\n    if ( this.isHidden ) {\r\n      this.css({ display: 'none' });\r\n      this.emitEvent('hide');\r\n    }\r\n  };\r\n\r\n  proto.destroy = function() {\r\n    this.css({\r\n      position: '',\r\n      left: '',\r\n      right: '',\r\n      top: '',\r\n      bottom: '',\r\n      transition: '',\r\n      transform: ''\r\n    });\r\n  };\r\n\r\n  return Item;\r\n\r\n}));\r\n\r\n/*!\r\n * Outlayer v2.1.1\r\n * the brains and guts of a layout library\r\n * MIT license\r\n */\r\n\r\n( function( window, factory ) {\r\n  'use strict';\r\n  // universal module definition\r\n  /* jshint strict: false */ /* globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD - RequireJS\r\n    define( 'outlayer/outlayer',[\r\n        'ev-emitter/ev-emitter',\r\n        'get-size/get-size',\r\n        'fizzy-ui-utils/utils',\r\n        './item'\r\n      ],\r\n      function( EvEmitter, getSize, utils, Item ) {\r\n        return factory( window, EvEmitter, getSize, utils, Item);\r\n      }\r\n    );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS - Browserify, Webpack\r\n    module.exports = factory(\r\n      window,\r\n      require('ev-emitter'),\r\n      require('get-size'),\r\n      require('fizzy-ui-utils'),\r\n      require('./item')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Outlayer = factory(\r\n      window,\r\n      window.EvEmitter,\r\n      window.getSize,\r\n      window.fizzyUIUtils,\r\n      window.Outlayer.Item\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, EvEmitter, getSize, utils, Item ) {\r\n  'use strict';\r\n\r\n// ----- vars ----- //\r\n\r\n  var console = window.console;\r\n  var jQuery = window.jQuery;\r\n  var noop = function() {};\r\n\r\n// -------------------------- Outlayer -------------------------- //\r\n\r\n// globally unique identifiers\r\n  var GUID = 0;\r\n// internal store of all Outlayer intances\r\n  var instances = {};\r\n\r\n\r\n  /**\r\n   * @param {Element, String} element\r\n   * @param {Object} options\r\n   * @constructor\r\n   */\r\n  function Outlayer( element, options ) {\r\n    var queryElement = utils.getQueryElement( element );\r\n    if ( !queryElement ) {\r\n      if ( console ) {\r\n        console.error( 'Bad element for ' + this.constructor.namespace +\r\n          ': ' + ( queryElement || element ) );\r\n      }\r\n      return;\r\n    }\r\n    this.element = queryElement;\r\n    // add jQuery\r\n    if ( jQuery ) {\r\n      this.$element = jQuery( this.element );\r\n    }\r\n\r\n    // options\r\n    this.options = utils.extend( {}, this.constructor.defaults );\r\n    this.option( options );\r\n\r\n    // add id for Outlayer.getFromElement\r\n    var id = ++GUID;\r\n    this.element.outlayerGUID = id; // expando\r\n    instances[ id ] = this; // associate via id\r\n\r\n    // kick it off\r\n    this._create();\r\n\r\n    var isInitLayout = this._getOption('initLayout');\r\n    if ( isInitLayout ) {\r\n      this.layout();\r\n    }\r\n  }\r\n\r\n// settings are for internal use only\r\n  Outlayer.namespace = 'outlayer';\r\n  Outlayer.Item = Item;\r\n\r\n// default options\r\n  Outlayer.defaults = {\r\n    containerStyle: {\r\n      position: 'relative'\r\n    },\r\n    initLayout: true,\r\n    originLeft: true,\r\n    originTop: true,\r\n    resize: true,\r\n    resizeContainer: true,\r\n    // item options\r\n    transitionDuration: '0.4s',\r\n    hiddenStyle: {\r\n      opacity: 0,\r\n      transform: 'scale(0.001)'\r\n    },\r\n    visibleStyle: {\r\n      opacity: 1,\r\n      transform: 'scale(1)'\r\n    }\r\n  };\r\n\r\n  var proto = Outlayer.prototype;\r\n// inherit EvEmitter\r\n  utils.extend( proto, EvEmitter.prototype );\r\n\r\n  /**\r\n   * set options\r\n   * @param {Object} opts\r\n   */\r\n  proto.option = function( opts ) {\r\n    utils.extend( this.options, opts );\r\n  };\r\n\r\n  /**\r\n   * get backwards compatible option value, check old name\r\n   */\r\n  proto._getOption = function( option ) {\r\n    var oldOption = this.constructor.compatOptions[ option ];\r\n    return oldOption && this.options[ oldOption ] !== undefined ?\r\n      this.options[ oldOption ] : this.options[ option ];\r\n  };\r\n\r\n  Outlayer.compatOptions = {\r\n    // currentName: oldName\r\n    initLayout: 'isInitLayout',\r\n    horizontal: 'isHorizontal',\r\n    layoutInstant: 'isLayoutInstant',\r\n    originLeft: 'isOriginLeft',\r\n    originTop: 'isOriginTop',\r\n    resize: 'isResizeBound',\r\n    resizeContainer: 'isResizingContainer'\r\n  };\r\n\r\n  proto._create = function() {\r\n    // get items from children\r\n    this.reloadItems();\r\n    // elements that affect layout, but are not laid out\r\n    this.stamps = [];\r\n    this.stamp( this.options.stamp );\r\n    // set container style\r\n    utils.extend( this.element.style, this.options.containerStyle );\r\n\r\n    // bind resize method\r\n    var canBindResize = this._getOption('resize');\r\n    if ( canBindResize ) {\r\n      this.bindResize();\r\n    }\r\n  };\r\n\r\n// goes through all children again and gets bricks in proper order\r\n  proto.reloadItems = function() {\r\n    // collection of item elements\r\n    this.items = this._itemize( this.element.children );\r\n  };\r\n\r\n\r\n  /**\r\n   * turn elements into Outlayer.Items to be used in layout\r\n   * @param {Array or NodeList or HTMLElement} elems\r\n   * @returns {Array} items - collection of new Outlayer Items\r\n   */\r\n  proto._itemize = function( elems ) {\r\n\r\n    var itemElems = this._filterFindItemElements( elems );\r\n    var Item = this.constructor.Item;\r\n\r\n    // create new Outlayer Items for collection\r\n    var items = [];\r\n    for ( var i=0; i < itemElems.length; i++ ) {\r\n      var elem = itemElems[i];\r\n      var item = new Item( elem, this );\r\n      items.push( item );\r\n    }\r\n\r\n    return items;\r\n  };\r\n\r\n  /**\r\n   * get item elements to be used in layout\r\n   * @param {Array or NodeList or HTMLElement} elems\r\n   * @returns {Array} items - item elements\r\n   */\r\n  proto._filterFindItemElements = function( elems ) {\r\n    return utils.filterFindElements( elems, this.options.itemSelector );\r\n  };\r\n\r\n  /**\r\n   * getter method for getting item elements\r\n   * @returns {Array} elems - collection of item elements\r\n   */\r\n  proto.getItemElements = function() {\r\n    return this.items.map( function( item ) {\r\n      return item.element;\r\n    });\r\n  };\r\n\r\n// ----- init & layout ----- //\r\n\r\n  /**\r\n   * lays out all items\r\n   */\r\n  proto.layout = function() {\r\n    this._resetLayout();\r\n    this._manageStamps();\r\n\r\n    // don't animate first layout\r\n    var layoutInstant = this._getOption('layoutInstant');\r\n    var isInstant = layoutInstant !== undefined ?\r\n      layoutInstant : !this._isLayoutInited;\r\n    this.layoutItems( this.items, isInstant );\r\n\r\n    // flag for initalized\r\n    this._isLayoutInited = true;\r\n  };\r\n\r\n// _init is alias for layout\r\n  proto._init = proto.layout;\r\n\r\n  /**\r\n   * logic before any new layout\r\n   */\r\n  proto._resetLayout = function() {\r\n    this.getSize();\r\n  };\r\n\r\n\r\n  proto.getSize = function() {\r\n    this.size = getSize( this.element );\r\n  };\r\n\r\n  /**\r\n   * get measurement from option, for columnWidth, rowHeight, gutter\r\n   * if option is String -> get element from selector string, & get size of element\r\n   * if option is Element -> get size of element\r\n   * else use option as a number\r\n   *\r\n   * @param {String} measurement\r\n   * @param {String} size - width or height\r\n   * @private\r\n   */\r\n  proto._getMeasurement = function( measurement, size ) {\r\n    var option = this.options[ measurement ];\r\n    var elem;\r\n    if ( !option ) {\r\n      // default to 0\r\n      this[ measurement ] = 0;\r\n    } else {\r\n      // use option as an element\r\n      if ( typeof option == 'string' ) {\r\n        elem = this.element.querySelector( option );\r\n      } else if ( option instanceof HTMLElement ) {\r\n        elem = option;\r\n      }\r\n      // use size of element, if element\r\n      this[ measurement ] = elem ? getSize( elem )[ size ] : option;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * layout a collection of item elements\r\n   * @api public\r\n   */\r\n  proto.layoutItems = function( items, isInstant ) {\r\n    items = this._getItemsForLayout( items );\r\n\r\n    this._layoutItems( items, isInstant );\r\n\r\n    this._postLayout();\r\n  };\r\n\r\n  /**\r\n   * get the items to be laid out\r\n   * you may want to skip over some items\r\n   * @param {Array} items\r\n   * @returns {Array} items\r\n   */\r\n  proto._getItemsForLayout = function( items ) {\r\n    return items.filter( function( item ) {\r\n      return !item.isIgnored;\r\n    });\r\n  };\r\n\r\n  /**\r\n   * layout items\r\n   * @param {Array} items\r\n   * @param {Boolean} isInstant\r\n   */\r\n  proto._layoutItems = function( items, isInstant ) {\r\n    this._emitCompleteOnItems( 'layout', items );\r\n\r\n    if ( !items || !items.length ) {\r\n      // no items, emit event with empty array\r\n      return;\r\n    }\r\n\r\n    var queue = [];\r\n\r\n    items.forEach( function( item ) {\r\n      // get x/y object from method\r\n      var position = this._getItemLayoutPosition( item );\r\n      // enqueue\r\n      position.item = item;\r\n      position.isInstant = isInstant || item.isLayoutInstant;\r\n      queue.push( position );\r\n    }, this );\r\n\r\n    this._processLayoutQueue( queue );\r\n  };\r\n\r\n  /**\r\n   * get item layout position\r\n   * @param {Outlayer.Item} item\r\n   * @returns {Object} x and y position\r\n   */\r\n  proto._getItemLayoutPosition = function( /* item */ ) {\r\n    return {\r\n      x: 0,\r\n      y: 0\r\n    };\r\n  };\r\n\r\n  /**\r\n   * iterate over array and position each item\r\n   * Reason being - separating this logic prevents 'layout invalidation'\r\n   * thx @paul_irish\r\n   * @param {Array} queue\r\n   */\r\n  proto._processLayoutQueue = function( queue ) {\r\n    this.updateStagger();\r\n    queue.forEach( function( obj, i ) {\r\n      this._positionItem( obj.item, obj.x, obj.y, obj.isInstant, i );\r\n    }, this );\r\n  };\r\n\r\n// set stagger from option in milliseconds number\r\n  proto.updateStagger = function() {\r\n    var stagger = this.options.stagger;\r\n    if ( stagger === null || stagger === undefined ) {\r\n      this.stagger = 0;\r\n      return;\r\n    }\r\n    this.stagger = getMilliseconds( stagger );\r\n    return this.stagger;\r\n  };\r\n\r\n  /**\r\n   * Sets position of item in DOM\r\n   * @param {Outlayer.Item} item\r\n   * @param {Number} x - horizontal position\r\n   * @param {Number} y - vertical position\r\n   * @param {Boolean} isInstant - disables transitions\r\n   */\r\n  proto._positionItem = function( item, x, y, isInstant, i ) {\r\n    if ( isInstant ) {\r\n      // if not transition, just set CSS\r\n      item.goTo( x, y );\r\n    } else {\r\n      item.stagger( i * this.stagger );\r\n      item.moveTo( x, y );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Any logic you want to do after each layout,\r\n   * i.e. size the container\r\n   */\r\n  proto._postLayout = function() {\r\n    this.resizeContainer();\r\n  };\r\n\r\n  proto.resizeContainer = function() {\r\n    var isResizingContainer = this._getOption('resizeContainer');\r\n    if ( !isResizingContainer ) {\r\n      return;\r\n    }\r\n    var size = this._getContainerSize();\r\n    if ( size ) {\r\n      this._setContainerMeasure( size.width, true );\r\n      this._setContainerMeasure( size.height, false );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Sets width or height of container if returned\r\n   * @returns {Object} size\r\n   *   @param {Number} width\r\n   *   @param {Number} height\r\n   */\r\n  proto._getContainerSize = noop;\r\n\r\n  /**\r\n   * @param {Number} measure - size of width or height\r\n   * @param {Boolean} isWidth\r\n   */\r\n  proto._setContainerMeasure = function( measure, isWidth ) {\r\n    if ( measure === undefined ) {\r\n      return;\r\n    }\r\n\r\n    var elemSize = this.size;\r\n    // add padding and border width if border box\r\n    if ( elemSize.isBorderBox ) {\r\n      measure += isWidth ? elemSize.paddingLeft + elemSize.paddingRight +\r\n        elemSize.borderLeftWidth + elemSize.borderRightWidth :\r\n        elemSize.paddingBottom + elemSize.paddingTop +\r\n        elemSize.borderTopWidth + elemSize.borderBottomWidth;\r\n    }\r\n\r\n    measure = Math.max( measure, 0 );\r\n    this.element.style[ isWidth ? 'width' : 'height' ] = measure + 'px';\r\n  };\r\n\r\n  /**\r\n   * emit eventComplete on a collection of items events\r\n   * @param {String} eventName\r\n   * @param {Array} items - Outlayer.Items\r\n   */\r\n  proto._emitCompleteOnItems = function( eventName, items ) {\r\n    var _this = this;\r\n    function onComplete() {\r\n      _this.dispatchEvent( eventName + 'Complete', null, [ items ] );\r\n    }\r\n\r\n    var count = items.length;\r\n    if ( !items || !count ) {\r\n      onComplete();\r\n      return;\r\n    }\r\n\r\n    var doneCount = 0;\r\n    function tick() {\r\n      doneCount++;\r\n      if ( doneCount == count ) {\r\n        onComplete();\r\n      }\r\n    }\r\n\r\n    // bind callback\r\n    items.forEach( function( item ) {\r\n      item.once( eventName, tick );\r\n    });\r\n  };\r\n\r\n  /**\r\n   * emits events via EvEmitter and jQuery events\r\n   * @param {String} type - name of event\r\n   * @param {Event} event - original event\r\n   * @param {Array} args - extra arguments\r\n   */\r\n  proto.dispatchEvent = function( type, event, args ) {\r\n    // add original event to arguments\r\n    var emitArgs = event ? [ event ].concat( args ) : args;\r\n    this.emitEvent( type, emitArgs );\r\n\r\n    if ( jQuery ) {\r\n      // set this.$element\r\n      this.$element = this.$element || jQuery( this.element );\r\n      if ( event ) {\r\n        // create jQuery event\r\n        var $event = jQuery.Event( event );\r\n        $event.type = type;\r\n        this.$element.trigger( $event, args );\r\n      } else {\r\n        // just trigger with type if no event available\r\n        this.$element.trigger( type, args );\r\n      }\r\n    }\r\n  };\r\n\r\n// -------------------------- ignore & stamps -------------------------- //\r\n\r\n\r\n  /**\r\n   * keep item in collection, but do not lay it out\r\n   * ignored items do not get skipped in layout\r\n   * @param {Element} elem\r\n   */\r\n  proto.ignore = function( elem ) {\r\n    var item = this.getItem( elem );\r\n    if ( item ) {\r\n      item.isIgnored = true;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * return item to layout collection\r\n   * @param {Element} elem\r\n   */\r\n  proto.unignore = function( elem ) {\r\n    var item = this.getItem( elem );\r\n    if ( item ) {\r\n      delete item.isIgnored;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * adds elements to stamps\r\n   * @param {NodeList, Array, Element, or String} elems\r\n   */\r\n  proto.stamp = function( elems ) {\r\n    elems = this._find( elems );\r\n    if ( !elems ) {\r\n      return;\r\n    }\r\n\r\n    this.stamps = this.stamps.concat( elems );\r\n    // ignore\r\n    elems.forEach( this.ignore, this );\r\n  };\r\n\r\n  /**\r\n   * removes elements to stamps\r\n   * @param {NodeList, Array, or Element} elems\r\n   */\r\n  proto.unstamp = function( elems ) {\r\n    elems = this._find( elems );\r\n    if ( !elems ){\r\n      return;\r\n    }\r\n\r\n    elems.forEach( function( elem ) {\r\n      // filter out removed stamp elements\r\n      utils.removeFrom( this.stamps, elem );\r\n      this.unignore( elem );\r\n    }, this );\r\n  };\r\n\r\n  /**\r\n   * finds child elements\r\n   * @param {NodeList, Array, Element, or String} elems\r\n   * @returns {Array} elems\r\n   */\r\n  proto._find = function( elems ) {\r\n    if ( !elems ) {\r\n      return;\r\n    }\r\n    // if string, use argument as selector string\r\n    if ( typeof elems == 'string' ) {\r\n      elems = this.element.querySelectorAll( elems );\r\n    }\r\n    elems = utils.makeArray( elems );\r\n    return elems;\r\n  };\r\n\r\n  proto._manageStamps = function() {\r\n    if ( !this.stamps || !this.stamps.length ) {\r\n      return;\r\n    }\r\n\r\n    this._getBoundingRect();\r\n\r\n    this.stamps.forEach( this._manageStamp, this );\r\n  };\r\n\r\n// update boundingLeft / Top\r\n  proto._getBoundingRect = function() {\r\n    // get bounding rect for container element\r\n    var boundingRect = this.element.getBoundingClientRect();\r\n    var size = this.size;\r\n    this._boundingRect = {\r\n      left: boundingRect.left + size.paddingLeft + size.borderLeftWidth,\r\n      top: boundingRect.top + size.paddingTop + size.borderTopWidth,\r\n      right: boundingRect.right - ( size.paddingRight + size.borderRightWidth ),\r\n      bottom: boundingRect.bottom - ( size.paddingBottom + size.borderBottomWidth )\r\n    };\r\n  };\r\n\r\n  /**\r\n   * @param {Element} stamp\r\n   **/\r\n  proto._manageStamp = noop;\r\n\r\n  /**\r\n   * get x/y position of element relative to container element\r\n   * @param {Element} elem\r\n   * @returns {Object} offset - has left, top, right, bottom\r\n   */\r\n  proto._getElementOffset = function( elem ) {\r\n    var boundingRect = elem.getBoundingClientRect();\r\n    var thisRect = this._boundingRect;\r\n    var size = getSize( elem );\r\n    var offset = {\r\n      left: boundingRect.left - thisRect.left - size.marginLeft,\r\n      top: boundingRect.top - thisRect.top - size.marginTop,\r\n      right: thisRect.right - boundingRect.right - size.marginRight,\r\n      bottom: thisRect.bottom - boundingRect.bottom - size.marginBottom\r\n    };\r\n    return offset;\r\n  };\r\n\r\n// -------------------------- resize -------------------------- //\r\n\r\n// enable event handlers for listeners\r\n// i.e. resize -> onresize\r\n  proto.handleEvent = utils.handleEvent;\r\n\r\n  /**\r\n   * Bind layout to window resizing\r\n   */\r\n  proto.bindResize = function() {\r\n    window.addEventListener( 'resize', this );\r\n    this.isResizeBound = true;\r\n  };\r\n\r\n  /**\r\n   * Unbind layout to window resizing\r\n   */\r\n  proto.unbindResize = function() {\r\n    window.removeEventListener( 'resize', this );\r\n    this.isResizeBound = false;\r\n  };\r\n\r\n  proto.onresize = function() {\r\n    this.resize();\r\n  };\r\n\r\n  utils.debounceMethod( Outlayer, 'onresize', 100 );\r\n\r\n  proto.resize = function() {\r\n    // don't trigger if size did not change\r\n    // or if resize was unbound. See #9\r\n    if ( !this.isResizeBound || !this.needsResizeLayout() ) {\r\n      return;\r\n    }\r\n\r\n    this.layout();\r\n  };\r\n\r\n  /**\r\n   * check if layout is needed post layout\r\n   * @returns Boolean\r\n   */\r\n  proto.needsResizeLayout = function() {\r\n    var size = getSize( this.element );\r\n    // check that this.size and size are there\r\n    // IE8 triggers resize on body size change, so they might not be\r\n    var hasSizes = this.size && size;\r\n    return hasSizes && size.innerWidth !== this.size.innerWidth;\r\n  };\r\n\r\n// -------------------------- methods -------------------------- //\r\n\r\n  /**\r\n   * add items to Outlayer instance\r\n   * @param {Array or NodeList or Element} elems\r\n   * @returns {Array} items - Outlayer.Items\r\n   **/\r\n  proto.addItems = function( elems ) {\r\n    var items = this._itemize( elems );\r\n    // add items to collection\r\n    if ( items.length ) {\r\n      this.items = this.items.concat( items );\r\n    }\r\n    return items;\r\n  };\r\n\r\n  /**\r\n   * Layout newly-appended item elements\r\n   * @param {Array or NodeList or Element} elems\r\n   */\r\n  proto.appended = function( elems ) {\r\n    var items = this.addItems( elems );\r\n    if ( !items.length ) {\r\n      return;\r\n    }\r\n    // layout and reveal just the new items\r\n    this.layoutItems( items, true );\r\n    this.reveal( items );\r\n  };\r\n\r\n  /**\r\n   * Layout prepended elements\r\n   * @param {Array or NodeList or Element} elems\r\n   */\r\n  proto.prepended = function( elems ) {\r\n    var items = this._itemize( elems );\r\n    if ( !items.length ) {\r\n      return;\r\n    }\r\n    // add items to beginning of collection\r\n    var previousItems = this.items.slice(0);\r\n    this.items = items.concat( previousItems );\r\n    // start new layout\r\n    this._resetLayout();\r\n    this._manageStamps();\r\n    // layout new stuff without transition\r\n    this.layoutItems( items, true );\r\n    this.reveal( items );\r\n    // layout previous items\r\n    this.layoutItems( previousItems );\r\n  };\r\n\r\n  /**\r\n   * reveal a collection of items\r\n   * @param {Array of Outlayer.Items} items\r\n   */\r\n  proto.reveal = function( items ) {\r\n    this._emitCompleteOnItems( 'reveal', items );\r\n    if ( !items || !items.length ) {\r\n      return;\r\n    }\r\n    var stagger = this.updateStagger();\r\n    items.forEach( function( item, i ) {\r\n      item.stagger( i * stagger );\r\n      item.reveal();\r\n    });\r\n  };\r\n\r\n  /**\r\n   * hide a collection of items\r\n   * @param {Array of Outlayer.Items} items\r\n   */\r\n  proto.hide = function( items ) {\r\n    this._emitCompleteOnItems( 'hide', items );\r\n    if ( !items || !items.length ) {\r\n      return;\r\n    }\r\n    var stagger = this.updateStagger();\r\n    items.forEach( function( item, i ) {\r\n      item.stagger( i * stagger );\r\n      item.hide();\r\n    });\r\n  };\r\n\r\n  /**\r\n   * reveal item elements\r\n   * @param {Array}, {Element}, {NodeList} items\r\n   */\r\n  proto.revealItemElements = function( elems ) {\r\n    var items = this.getItems( elems );\r\n    this.reveal( items );\r\n  };\r\n\r\n  /**\r\n   * hide item elements\r\n   * @param {Array}, {Element}, {NodeList} items\r\n   */\r\n  proto.hideItemElements = function( elems ) {\r\n    var items = this.getItems( elems );\r\n    this.hide( items );\r\n  };\r\n\r\n  /**\r\n   * get Outlayer.Item, given an Element\r\n   * @param {Element} elem\r\n   * @param {Function} callback\r\n   * @returns {Outlayer.Item} item\r\n   */\r\n  proto.getItem = function( elem ) {\r\n    // loop through items to get the one that matches\r\n    for ( var i=0; i < this.items.length; i++ ) {\r\n      var item = this.items[i];\r\n      if ( item.element == elem ) {\r\n        // return item\r\n        return item;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * get collection of Outlayer.Items, given Elements\r\n   * @param {Array} elems\r\n   * @returns {Array} items - Outlayer.Items\r\n   */\r\n  proto.getItems = function( elems ) {\r\n    elems = utils.makeArray( elems );\r\n    var items = [];\r\n    elems.forEach( function( elem ) {\r\n      var item = this.getItem( elem );\r\n      if ( item ) {\r\n        items.push( item );\r\n      }\r\n    }, this );\r\n\r\n    return items;\r\n  };\r\n\r\n  /**\r\n   * remove element(s) from instance and DOM\r\n   * @param {Array or NodeList or Element} elems\r\n   */\r\n  proto.remove = function( elems ) {\r\n    var removeItems = this.getItems( elems );\r\n\r\n    this._emitCompleteOnItems( 'remove', removeItems );\r\n\r\n    // bail if no items to remove\r\n    if ( !removeItems || !removeItems.length ) {\r\n      return;\r\n    }\r\n\r\n    removeItems.forEach( function( item ) {\r\n      item.remove();\r\n      // remove item from collection\r\n      utils.removeFrom( this.items, item );\r\n    }, this );\r\n  };\r\n\r\n// ----- destroy ----- //\r\n\r\n// remove and disable Outlayer instance\r\n  proto.destroy = function() {\r\n    // clean up dynamic styles\r\n    var style = this.element.style;\r\n    style.height = '';\r\n    style.position = '';\r\n    style.width = '';\r\n    // destroy items\r\n    this.items.forEach( function( item ) {\r\n      item.destroy();\r\n    });\r\n\r\n    this.unbindResize();\r\n\r\n    var id = this.element.outlayerGUID;\r\n    delete instances[ id ]; // remove reference to instance by id\r\n    delete this.element.outlayerGUID;\r\n    // remove data for jQuery\r\n    if ( jQuery ) {\r\n      jQuery.removeData( this.element, this.constructor.namespace );\r\n    }\r\n\r\n  };\r\n\r\n// -------------------------- data -------------------------- //\r\n\r\n  /**\r\n   * get Outlayer instance from element\r\n   * @param {Element} elem\r\n   * @returns {Outlayer}\r\n   */\r\n  Outlayer.data = function( elem ) {\r\n    elem = utils.getQueryElement( elem );\r\n    var id = elem && elem.outlayerGUID;\r\n    return id && instances[ id ];\r\n  };\r\n\r\n\r\n// -------------------------- create Outlayer class -------------------------- //\r\n\r\n  /**\r\n   * create a layout class\r\n   * @param {String} namespace\r\n   */\r\n  Outlayer.create = function( namespace, options ) {\r\n    // sub-class Outlayer\r\n    var Layout = subclass( Outlayer );\r\n    // apply new options and compatOptions\r\n    Layout.defaults = utils.extend( {}, Outlayer.defaults );\r\n    utils.extend( Layout.defaults, options );\r\n    Layout.compatOptions = utils.extend( {}, Outlayer.compatOptions  );\r\n\r\n    Layout.namespace = namespace;\r\n\r\n    Layout.data = Outlayer.data;\r\n\r\n    // sub-class Item\r\n    Layout.Item = subclass( Item );\r\n\r\n    // -------------------------- declarative -------------------------- //\r\n\r\n    utils.htmlInit( Layout, namespace );\r\n\r\n    // -------------------------- jQuery bridge -------------------------- //\r\n\r\n    // make into jQuery plugin\r\n    if ( jQuery && jQuery.bridget ) {\r\n      jQuery.bridget( namespace, Layout );\r\n    }\r\n\r\n    return Layout;\r\n  };\r\n\r\n  function subclass( Parent ) {\r\n    function SubClass() {\r\n      Parent.apply( this, arguments );\r\n    }\r\n\r\n    SubClass.prototype = Object.create( Parent.prototype );\r\n    SubClass.prototype.constructor = SubClass;\r\n\r\n    return SubClass;\r\n  }\r\n\r\n// ----- helpers ----- //\r\n\r\n// how many milliseconds are in each unit\r\n  var msUnits = {\r\n    ms: 1,\r\n    s: 1000\r\n  };\r\n\r\n// munge time-like parameter into millisecond number\r\n// '0.4s' -> 40\r\n  function getMilliseconds( time ) {\r\n    if ( typeof time == 'number' ) {\r\n      return time;\r\n    }\r\n    var matches = time.match( /(^\\d*\\.?\\d*)(\\w*)/ );\r\n    var num = matches && matches[1];\r\n    var unit = matches && matches[2];\r\n    if ( !num.length ) {\r\n      return 0;\r\n    }\r\n    num = parseFloat( num );\r\n    var mult = msUnits[ unit ] || 1;\r\n    return num * mult;\r\n  }\r\n\r\n// ----- fin ----- //\r\n\r\n// back in global\r\n  Outlayer.Item = Item;\r\n\r\n  return Outlayer;\r\n\r\n}));\r\n\r\n/**\r\n * Isotope Item\r\n **/\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'isotope-layout/js/item',[\r\n        'outlayer/outlayer'\r\n      ],\r\n      factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('outlayer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Isotope = window.Isotope || {};\r\n    window.Isotope.Item = factory(\r\n      window.Outlayer\r\n    );\r\n  }\r\n\r\n}( window, function factory( Outlayer ) {\r\n  'use strict';\r\n\r\n// -------------------------- Item -------------------------- //\r\n\r\n// sub-class Outlayer Item\r\n  function Item() {\r\n    Outlayer.Item.apply( this, arguments );\r\n  }\r\n\r\n  var proto = Item.prototype = Object.create( Outlayer.Item.prototype );\r\n\r\n  var _create = proto._create;\r\n  proto._create = function() {\r\n    // assign id, used for original-order sorting\r\n    this.id = this.layout.itemGUID++;\r\n    _create.call( this );\r\n    this.sortData = {};\r\n  };\r\n\r\n  proto.updateSortData = function() {\r\n    if ( this.isIgnored ) {\r\n      return;\r\n    }\r\n    // default sorters\r\n    this.sortData.id = this.id;\r\n    // for backward compatibility\r\n    this.sortData['original-order'] = this.id;\r\n    this.sortData.random = Math.random();\r\n    // go thru getSortData obj and apply the sorters\r\n    var getSortData = this.layout.options.getSortData;\r\n    var sorters = this.layout._sorters;\r\n    for ( var key in getSortData ) {\r\n      var sorter = sorters[ key ];\r\n      this.sortData[ key ] = sorter( this.element, this );\r\n    }\r\n  };\r\n\r\n  var _destroy = proto.destroy;\r\n  proto.destroy = function() {\r\n    // call super\r\n    _destroy.apply( this, arguments );\r\n    // reset display, #741\r\n    this.css({\r\n      display: ''\r\n    });\r\n  };\r\n\r\n  return Item;\r\n\r\n}));\r\n\r\n/**\r\n * Isotope LayoutMode\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'isotope-layout/js/layout-mode',[\r\n        'get-size/get-size',\r\n        'outlayer/outlayer'\r\n      ],\r\n      factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('get-size'),\r\n      require('outlayer')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Isotope = window.Isotope || {};\r\n    window.Isotope.LayoutMode = factory(\r\n      window.getSize,\r\n      window.Outlayer\r\n    );\r\n  }\r\n\r\n}( window, function factory( getSize, Outlayer ) {\r\n  'use strict';\r\n\r\n  // layout mode class\r\n  function LayoutMode( isotope ) {\r\n    this.isotope = isotope;\r\n    // link properties\r\n    if ( isotope ) {\r\n      this.options = isotope.options[ this.namespace ];\r\n      this.element = isotope.element;\r\n      this.items = isotope.filteredItems;\r\n      this.size = isotope.size;\r\n    }\r\n  }\r\n\r\n  var proto = LayoutMode.prototype;\r\n\r\n  /**\r\n   * some methods should just defer to default Outlayer method\r\n   * and reference the Isotope instance as `this`\r\n   **/\r\n  var facadeMethods = [\r\n    '_resetLayout',\r\n    '_getItemLayoutPosition',\r\n    '_manageStamp',\r\n    '_getContainerSize',\r\n    '_getElementOffset',\r\n    'needsResizeLayout',\r\n    '_getOption'\r\n  ];\r\n\r\n  facadeMethods.forEach( function( methodName ) {\r\n    proto[ methodName ] = function() {\r\n      return Outlayer.prototype[ methodName ].apply( this.isotope, arguments );\r\n    };\r\n  });\r\n\r\n  // -----  ----- //\r\n\r\n  // for horizontal layout modes, check vertical size\r\n  proto.needsVerticalResizeLayout = function() {\r\n    // don't trigger if size did not change\r\n    var size = getSize( this.isotope.element );\r\n    // check that this.size and size are there\r\n    // IE8 triggers resize on body size change, so they might not be\r\n    var hasSizes = this.isotope.size && size;\r\n    return hasSizes && size.innerHeight != this.isotope.size.innerHeight;\r\n  };\r\n\r\n  // ----- measurements ----- //\r\n\r\n  proto._getMeasurement = function() {\r\n    this.isotope._getMeasurement.apply( this, arguments );\r\n  };\r\n\r\n  proto.getColumnWidth = function() {\r\n    this.getSegmentSize( 'column', 'Width' );\r\n  };\r\n\r\n  proto.getRowHeight = function() {\r\n    this.getSegmentSize( 'row', 'Height' );\r\n  };\r\n\r\n  /**\r\n   * get columnWidth or rowHeight\r\n   * segment: 'column' or 'row'\r\n   * size 'Width' or 'Height'\r\n   **/\r\n  proto.getSegmentSize = function( segment, size ) {\r\n    var segmentName = segment + size;\r\n    var outerSize = 'outer' + size;\r\n    // columnWidth / outerWidth // rowHeight / outerHeight\r\n    this._getMeasurement( segmentName, outerSize );\r\n    // got rowHeight or columnWidth, we can chill\r\n    if ( this[ segmentName ] ) {\r\n      return;\r\n    }\r\n    // fall back to item of first element\r\n    var firstItemSize = this.getFirstItemSize();\r\n    this[ segmentName ] = firstItemSize && firstItemSize[ outerSize ] ||\r\n      // or size of container\r\n      this.isotope.size[ 'inner' + size ];\r\n  };\r\n\r\n  proto.getFirstItemSize = function() {\r\n    var firstItem = this.isotope.filteredItems[0];\r\n    return firstItem && firstItem.element && getSize( firstItem.element );\r\n  };\r\n\r\n  // ----- methods that should reference isotope ----- //\r\n\r\n  proto.layout = function() {\r\n    this.isotope.layout.apply( this.isotope, arguments );\r\n  };\r\n\r\n  proto.getSize = function() {\r\n    this.isotope.getSize();\r\n    this.size = this.isotope.size;\r\n  };\r\n\r\n  // -------------------------- create -------------------------- //\r\n\r\n  LayoutMode.modes = {};\r\n\r\n  LayoutMode.create = function( namespace, options ) {\r\n\r\n    function Mode() {\r\n      LayoutMode.apply( this, arguments );\r\n    }\r\n\r\n    Mode.prototype = Object.create( proto );\r\n    Mode.prototype.constructor = Mode;\r\n\r\n    // default options\r\n    if ( options ) {\r\n      Mode.options = options;\r\n    }\r\n\r\n    Mode.prototype.namespace = namespace;\r\n    // register in Isotope\r\n    LayoutMode.modes[ namespace ] = Mode;\r\n\r\n    return Mode;\r\n  };\r\n\r\n  return LayoutMode;\r\n\r\n}));\r\n\r\n/*!\r\n * Masonry v4.2.1\r\n * Cascading grid layout library\r\n * https://masonry.desandro.com\r\n * MIT License\r\n * by David DeSandro\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'masonry-layout/masonry',[\r\n        'outlayer/outlayer',\r\n        'get-size/get-size'\r\n      ],\r\n      factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('outlayer'),\r\n      require('get-size')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Masonry = factory(\r\n      window.Outlayer,\r\n      window.getSize\r\n    );\r\n  }\r\n\r\n}( window, function factory( Outlayer, getSize ) {\r\n\r\n\r\n\r\n// -------------------------- masonryDefinition -------------------------- //\r\n\r\n  // create an Outlayer layout class\r\n  var Masonry = Outlayer.create('masonry');\r\n  // isFitWidth -> fitWidth\r\n  Masonry.compatOptions.fitWidth = 'isFitWidth';\r\n\r\n  var proto = Masonry.prototype;\r\n\r\n  proto._resetLayout = function() {\r\n    this.getSize();\r\n    this._getMeasurement( 'columnWidth', 'outerWidth' );\r\n    this._getMeasurement( 'gutter', 'outerWidth' );\r\n    this.measureColumns();\r\n\r\n    // reset column Y\r\n    this.colYs = [];\r\n    for ( var i=0; i < this.cols; i++ ) {\r\n      this.colYs.push( 0 );\r\n    }\r\n\r\n    this.maxY = 0;\r\n    this.horizontalColIndex = 0;\r\n  };\r\n\r\n  proto.measureColumns = function() {\r\n    this.getContainerWidth();\r\n    // if columnWidth is 0, default to outerWidth of first item\r\n    if ( !this.columnWidth ) {\r\n      var firstItem = this.items[0];\r\n      var firstItemElem = firstItem && firstItem.element;\r\n      // columnWidth fall back to item of first element\r\n      this.columnWidth = firstItemElem && getSize( firstItemElem ).outerWidth ||\r\n        // if first elem has no width, default to size of container\r\n        this.containerWidth;\r\n    }\r\n\r\n    var columnWidth = this.columnWidth += this.gutter;\r\n\r\n    // calculate columns\r\n    var containerWidth = this.containerWidth + this.gutter;\r\n    var cols = containerWidth / columnWidth;\r\n    // fix rounding errors, typically with gutters\r\n    var excess = columnWidth - containerWidth % columnWidth;\r\n    // if overshoot is less than a pixel, round up, otherwise floor it\r\n    var mathMethod = excess && excess < 1 ? 'round' : 'floor';\r\n    cols = Math[ mathMethod ]( cols );\r\n    this.cols = Math.max( cols, 1 );\r\n  };\r\n\r\n  proto.getContainerWidth = function() {\r\n    // container is parent if fit width\r\n    var isFitWidth = this._getOption('fitWidth');\r\n    var container = isFitWidth ? this.element.parentNode : this.element;\r\n    // check that this.size and size are there\r\n    // IE8 triggers resize on body size change, so they might not be\r\n    var size = getSize( container );\r\n    this.containerWidth = size && size.innerWidth;\r\n  };\r\n\r\n  proto._getItemLayoutPosition = function( item ) {\r\n    item.getSize();\r\n    // how many columns does this brick span\r\n    var remainder = item.size.outerWidth % this.columnWidth;\r\n    var mathMethod = remainder && remainder < 1 ? 'round' : 'ceil';\r\n    // round if off by 1 pixel, otherwise use ceil\r\n    var colSpan = Math[ mathMethod ]( item.size.outerWidth / this.columnWidth );\r\n    colSpan = Math.min( colSpan, this.cols );\r\n    // use horizontal or top column position\r\n    var colPosMethod = this.options.horizontalOrder ?\r\n      '_getHorizontalColPosition' : '_getTopColPosition';\r\n    var colPosition = this[ colPosMethod ]( colSpan, item );\r\n    // position the brick\r\n    var position = {\r\n      x: this.columnWidth * colPosition.col,\r\n      y: colPosition.y\r\n    };\r\n    // apply setHeight to necessary columns\r\n    var setHeight = colPosition.y + item.size.outerHeight;\r\n    var setMax = colSpan + colPosition.col;\r\n    for ( var i = colPosition.col; i < setMax; i++ ) {\r\n      this.colYs[i] = setHeight;\r\n    }\r\n\r\n    return position;\r\n  };\r\n\r\n  proto._getTopColPosition = function( colSpan ) {\r\n    var colGroup = this._getTopColGroup( colSpan );\r\n    // get the minimum Y value from the columns\r\n    var minimumY = Math.min.apply( Math, colGroup );\r\n\r\n    return {\r\n      col: colGroup.indexOf( minimumY ),\r\n      y: minimumY,\r\n    };\r\n  };\r\n\r\n  /**\r\n   * @param {Number} colSpan - number of columns the element spans\r\n   * @returns {Array} colGroup\r\n   */\r\n  proto._getTopColGroup = function( colSpan ) {\r\n    if ( colSpan < 2 ) {\r\n      // if brick spans only one column, use all the column Ys\r\n      return this.colYs;\r\n    }\r\n\r\n    var colGroup = [];\r\n    // how many different places could this brick fit horizontally\r\n    var groupCount = this.cols + 1 - colSpan;\r\n    // for each group potential horizontal position\r\n    for ( var i = 0; i < groupCount; i++ ) {\r\n      colGroup[i] = this._getColGroupY( i, colSpan );\r\n    }\r\n    return colGroup;\r\n  };\r\n\r\n  proto._getColGroupY = function( col, colSpan ) {\r\n    if ( colSpan < 2 ) {\r\n      return this.colYs[ col ];\r\n    }\r\n    // make an array of colY values for that one group\r\n    var groupColYs = this.colYs.slice( col, col + colSpan );\r\n    // and get the max value of the array\r\n    return Math.max.apply( Math, groupColYs );\r\n  };\r\n\r\n  // get column position based on horizontal index. #873\r\n  proto._getHorizontalColPosition = function( colSpan, item ) {\r\n    var col = this.horizontalColIndex % this.cols;\r\n    var isOver = colSpan > 1 && col + colSpan > this.cols;\r\n    // shift to next row if item can't fit on current row\r\n    col = isOver ? 0 : col;\r\n    // don't let zero-size items take up space\r\n    var hasSize = item.size.outerWidth && item.size.outerHeight;\r\n    this.horizontalColIndex = hasSize ? col + colSpan : this.horizontalColIndex;\r\n\r\n    return {\r\n      col: col,\r\n      y: this._getColGroupY( col, colSpan ),\r\n    };\r\n  };\r\n\r\n  proto._manageStamp = function( stamp ) {\r\n    var stampSize = getSize( stamp );\r\n    var offset = this._getElementOffset( stamp );\r\n    // get the columns that this stamp affects\r\n    var isOriginLeft = this._getOption('originLeft');\r\n    var firstX = isOriginLeft ? offset.left : offset.right;\r\n    var lastX = firstX + stampSize.outerWidth;\r\n    var firstCol = Math.floor( firstX / this.columnWidth );\r\n    firstCol = Math.max( 0, firstCol );\r\n    var lastCol = Math.floor( lastX / this.columnWidth );\r\n    // lastCol should not go over if multiple of columnWidth #425\r\n    lastCol -= lastX % this.columnWidth ? 0 : 1;\r\n    lastCol = Math.min( this.cols - 1, lastCol );\r\n    // set colYs to bottom of the stamp\r\n\r\n    var isOriginTop = this._getOption('originTop');\r\n    var stampMaxY = ( isOriginTop ? offset.top : offset.bottom ) +\r\n      stampSize.outerHeight;\r\n    for ( var i = firstCol; i <= lastCol; i++ ) {\r\n      this.colYs[i] = Math.max( stampMaxY, this.colYs[i] );\r\n    }\r\n  };\r\n\r\n  proto._getContainerSize = function() {\r\n    this.maxY = Math.max.apply( Math, this.colYs );\r\n    var size = {\r\n      height: this.maxY\r\n    };\r\n\r\n    if ( this._getOption('fitWidth') ) {\r\n      size.width = this._getContainerFitWidth();\r\n    }\r\n\r\n    return size;\r\n  };\r\n\r\n  proto._getContainerFitWidth = function() {\r\n    var unusedCols = 0;\r\n    // count unused columns\r\n    var i = this.cols;\r\n    while ( --i ) {\r\n      if ( this.colYs[i] !== 0 ) {\r\n        break;\r\n      }\r\n      unusedCols++;\r\n    }\r\n    // fit container to columns that have been used\r\n    return ( this.cols - unusedCols ) * this.columnWidth - this.gutter;\r\n  };\r\n\r\n  proto.needsResizeLayout = function() {\r\n    var previousWidth = this.containerWidth;\r\n    this.getContainerWidth();\r\n    return previousWidth != this.containerWidth;\r\n  };\r\n\r\n  return Masonry;\r\n\r\n}));\r\n\r\n/*!\r\n * Masonry layout mode\r\n * sub-classes Masonry\r\n * https://masonry.desandro.com\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'isotope-layout/js/layout-modes/masonry',[\r\n        '../layout-mode',\r\n        'masonry-layout/masonry'\r\n      ],\r\n      factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('../layout-mode'),\r\n      require('masonry-layout')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.Isotope.LayoutMode,\r\n      window.Masonry\r\n    );\r\n  }\r\n\r\n}( window, function factory( LayoutMode, Masonry ) {\r\n  'use strict';\r\n\r\n// -------------------------- masonryDefinition -------------------------- //\r\n\r\n  // create an Outlayer layout class\r\n  var MasonryMode = LayoutMode.create('masonry');\r\n\r\n  var proto = MasonryMode.prototype;\r\n\r\n  var keepModeMethods = {\r\n    _getElementOffset: true,\r\n    layout: true,\r\n    _getMeasurement: true\r\n  };\r\n\r\n  // inherit Masonry prototype\r\n  for ( var method in Masonry.prototype ) {\r\n    // do not inherit mode methods\r\n    if ( !keepModeMethods[ method ] ) {\r\n      proto[ method ] = Masonry.prototype[ method ];\r\n    }\r\n  }\r\n\r\n  var measureColumns = proto.measureColumns;\r\n  proto.measureColumns = function() {\r\n    // set items, used if measuring first item\r\n    this.items = this.isotope.filteredItems;\r\n    measureColumns.call( this );\r\n  };\r\n\r\n  // point to mode options for fitWidth\r\n  var _getOption = proto._getOption;\r\n  proto._getOption = function( option ) {\r\n    if ( option == 'fitWidth' ) {\r\n      return this.options.isFitWidth !== undefined ?\r\n        this.options.isFitWidth : this.options.fitWidth;\r\n    }\r\n    return _getOption.apply( this.isotope, arguments );\r\n  };\r\n\r\n  return MasonryMode;\r\n\r\n}));\r\n\r\n/**\r\n * fitRows layout mode\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'isotope-layout/js/layout-modes/fit-rows',[\r\n        '../layout-mode'\r\n      ],\r\n      factory );\r\n  } else if ( typeof exports == 'object' ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('../layout-mode')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.Isotope.LayoutMode\r\n    );\r\n  }\r\n\r\n}( window, function factory( LayoutMode ) {\r\n  'use strict';\r\n\r\n  var FitRows = LayoutMode.create('fitRows');\r\n\r\n  var proto = FitRows.prototype;\r\n\r\n  proto._resetLayout = function() {\r\n    this.x = 0;\r\n    this.y = 0;\r\n    this.maxY = 0;\r\n    this._getMeasurement( 'gutter', 'outerWidth' );\r\n  };\r\n\r\n  proto._getItemLayoutPosition = function( item ) {\r\n    item.getSize();\r\n\r\n    var itemWidth = item.size.outerWidth + this.gutter;\r\n    // if this element cannot fit in the current row\r\n    var containerWidth = this.isotope.size.innerWidth + this.gutter;\r\n    if ( this.x !== 0 && itemWidth + this.x > containerWidth ) {\r\n      this.x = 0;\r\n      this.y = this.maxY;\r\n    }\r\n\r\n    var position = {\r\n      x: this.x,\r\n      y: this.y\r\n    };\r\n\r\n    this.maxY = Math.max( this.maxY, this.y + item.size.outerHeight );\r\n    this.x += itemWidth;\r\n\r\n    return position;\r\n  };\r\n\r\n  proto._getContainerSize = function() {\r\n    return { height: this.maxY };\r\n  };\r\n\r\n  return FitRows;\r\n\r\n}));\r\n\r\n/**\r\n * vertical layout mode\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( 'isotope-layout/js/layout-modes/vertical',[\r\n        '../layout-mode'\r\n      ],\r\n      factory );\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      require('../layout-mode')\r\n    );\r\n  } else {\r\n    // browser global\r\n    factory(\r\n      window.Isotope.LayoutMode\r\n    );\r\n  }\r\n\r\n}( window, function factory( LayoutMode ) {\r\n  'use strict';\r\n\r\n  var Vertical = LayoutMode.create( 'vertical', {\r\n    horizontalAlignment: 0\r\n  });\r\n\r\n  var proto = Vertical.prototype;\r\n\r\n  proto._resetLayout = function() {\r\n    this.y = 0;\r\n  };\r\n\r\n  proto._getItemLayoutPosition = function( item ) {\r\n    item.getSize();\r\n    var x = ( this.isotope.size.innerWidth - item.size.outerWidth ) *\r\n      this.options.horizontalAlignment;\r\n    var y = this.y;\r\n    this.y += item.size.outerHeight;\r\n    return { x: x, y: y };\r\n  };\r\n\r\n  proto._getContainerSize = function() {\r\n    return { height: this.y };\r\n  };\r\n\r\n  return Vertical;\r\n\r\n}));\r\n\r\n/*!\r\n * Isotope v3.0.6\r\n *\r\n * Licensed GPLv3 for open source use\r\n * or Isotope Commercial License for commercial use\r\n *\r\n * https://isotope.metafizzy.co\r\n * Copyright 2010-2018 Metafizzy\r\n */\r\n\r\n( function( window, factory ) {\r\n  // universal module definition\r\n  /* jshint strict: false */ /*globals define, module, require */\r\n  if ( typeof define == 'function' && define.amd ) {\r\n    // AMD\r\n    define( [\r\n        'outlayer/outlayer',\r\n        'get-size/get-size',\r\n        'desandro-matches-selector/matches-selector',\r\n        'fizzy-ui-utils/utils',\r\n        'isotope-layout/js/item',\r\n        'isotope-layout/js/layout-mode',\r\n        // include default layout modes\r\n        'isotope-layout/js/layout-modes/masonry',\r\n        'isotope-layout/js/layout-modes/fit-rows',\r\n        'isotope-layout/js/layout-modes/vertical'\r\n      ],\r\n      function( Outlayer, getSize, matchesSelector, utils, Item, LayoutMode ) {\r\n        return factory( window, Outlayer, getSize, matchesSelector, utils, Item, LayoutMode );\r\n      });\r\n  } else if ( typeof module == 'object' && module.exports ) {\r\n    // CommonJS\r\n    module.exports = factory(\r\n      window,\r\n      require('outlayer'),\r\n      require('get-size'),\r\n      require('desandro-matches-selector'),\r\n      require('fizzy-ui-utils'),\r\n      require('isotope-layout/js/item'),\r\n      require('isotope-layout/js/layout-mode'),\r\n      // include default layout modes\r\n      require('isotope-layout/js/layout-modes/masonry'),\r\n      require('isotope-layout/js/layout-modes/fit-rows'),\r\n      require('isotope-layout/js/layout-modes/vertical')\r\n    );\r\n  } else {\r\n    // browser global\r\n    window.Isotope = factory(\r\n      window,\r\n      window.Outlayer,\r\n      window.getSize,\r\n      window.matchesSelector,\r\n      window.fizzyUIUtils,\r\n      window.Isotope.Item,\r\n      window.Isotope.LayoutMode\r\n    );\r\n  }\r\n\r\n}( window, function factory( window, Outlayer, getSize, matchesSelector, utils,\r\n  Item, LayoutMode ) {\r\n\r\n\r\n\r\n// -------------------------- vars -------------------------- //\r\n\r\n  var jQuery = window.jQuery;\r\n\r\n// -------------------------- helpers -------------------------- //\r\n\r\n  var trim = String.prototype.trim ?\r\n    function( str ) {\r\n      return str.trim();\r\n    } :\r\n    function( str ) {\r\n      return str.replace( /^\\s+|\\s+$/g, '' );\r\n    };\r\n\r\n// -------------------------- isotopeDefinition -------------------------- //\r\n\r\n  // create an Outlayer layout class\r\n  var Isotope = Outlayer.create( 'isotope', {\r\n    layoutMode: 'masonry',\r\n    isJQueryFiltering: true,\r\n    sortAscending: true\r\n  });\r\n\r\n  Isotope.Item = Item;\r\n  Isotope.LayoutMode = LayoutMode;\r\n\r\n  var proto = Isotope.prototype;\r\n\r\n  proto._create = function() {\r\n    this.itemGUID = 0;\r\n    // functions that sort items\r\n    this._sorters = {};\r\n    this._getSorters();\r\n    // call super\r\n    Outlayer.prototype._create.call( this );\r\n\r\n    // create layout modes\r\n    this.modes = {};\r\n    // start filteredItems with all items\r\n    this.filteredItems = this.items;\r\n    // keep of track of sortBys\r\n    this.sortHistory = [ 'original-order' ];\r\n    // create from registered layout modes\r\n    for ( var name in LayoutMode.modes ) {\r\n      this._initLayoutMode( name );\r\n    }\r\n  };\r\n\r\n  proto.reloadItems = function() {\r\n    // reset item ID counter\r\n    this.itemGUID = 0;\r\n    // call super\r\n    Outlayer.prototype.reloadItems.call( this );\r\n  };\r\n\r\n  proto._itemize = function() {\r\n    var items = Outlayer.prototype._itemize.apply( this, arguments );\r\n    // assign ID for original-order\r\n    for ( var i=0; i < items.length; i++ ) {\r\n      var item = items[i];\r\n      item.id = this.itemGUID++;\r\n    }\r\n    this._updateItemsSortData( items );\r\n    return items;\r\n  };\r\n\r\n\r\n  // -------------------------- layout -------------------------- //\r\n\r\n  proto._initLayoutMode = function( name ) {\r\n    var Mode = LayoutMode.modes[ name ];\r\n    // set mode options\r\n    // HACK extend initial options, back-fill in default options\r\n    var initialOpts = this.options[ name ] || {};\r\n    this.options[ name ] = Mode.options ?\r\n      utils.extend( Mode.options, initialOpts ) : initialOpts;\r\n    // init layout mode instance\r\n    this.modes[ name ] = new Mode( this );\r\n  };\r\n\r\n\r\n  proto.layout = function() {\r\n    // if first time doing layout, do all magic\r\n    if ( !this._isLayoutInited && this._getOption('initLayout') ) {\r\n      this.arrange();\r\n      return;\r\n    }\r\n    this._layout();\r\n  };\r\n\r\n  // private method to be used in layout() & magic()\r\n  proto._layout = function() {\r\n    // don't animate first layout\r\n    var isInstant = this._getIsInstant();\r\n    // layout flow\r\n    this._resetLayout();\r\n    this._manageStamps();\r\n    this.layoutItems( this.filteredItems, isInstant );\r\n\r\n    // flag for initalized\r\n    this._isLayoutInited = true;\r\n  };\r\n\r\n  // filter + sort + layout\r\n  proto.arrange = function( opts ) {\r\n    // set any options pass\r\n    this.option( opts );\r\n    this._getIsInstant();\r\n    // filter, sort, and layout\r\n\r\n    // filter\r\n    var filtered = this._filter( this.items );\r\n    this.filteredItems = filtered.matches;\r\n\r\n    this._bindArrangeComplete();\r\n\r\n    if ( this._isInstant ) {\r\n      this._noTransition( this._hideReveal, [ filtered ] );\r\n    } else {\r\n      this._hideReveal( filtered );\r\n    }\r\n\r\n    this._sort();\r\n    this._layout();\r\n  };\r\n  // alias to _init for main plugin method\r\n  proto._init = proto.arrange;\r\n\r\n  proto._hideReveal = function( filtered ) {\r\n    this.reveal( filtered.needReveal );\r\n    this.hide( filtered.needHide );\r\n  };\r\n\r\n  // HACK\r\n  // Don't animate/transition first layout\r\n  // Or don't animate/transition other layouts\r\n  proto._getIsInstant = function() {\r\n    var isLayoutInstant = this._getOption('layoutInstant');\r\n    var isInstant = isLayoutInstant !== undefined ? isLayoutInstant :\r\n      !this._isLayoutInited;\r\n    this._isInstant = isInstant;\r\n    return isInstant;\r\n  };\r\n\r\n  // listen for layoutComplete, hideComplete and revealComplete\r\n  // to trigger arrangeComplete\r\n  proto._bindArrangeComplete = function() {\r\n    // listen for 3 events to trigger arrangeComplete\r\n    var isLayoutComplete, isHideComplete, isRevealComplete;\r\n    var _this = this;\r\n    function arrangeParallelCallback() {\r\n      if ( isLayoutComplete && isHideComplete && isRevealComplete ) {\r\n        _this.dispatchEvent( 'arrangeComplete', null, [ _this.filteredItems ] );\r\n      }\r\n    }\r\n    this.once( 'layoutComplete', function() {\r\n      isLayoutComplete = true;\r\n      arrangeParallelCallback();\r\n    });\r\n    this.once( 'hideComplete', function() {\r\n      isHideComplete = true;\r\n      arrangeParallelCallback();\r\n    });\r\n    this.once( 'revealComplete', function() {\r\n      isRevealComplete = true;\r\n      arrangeParallelCallback();\r\n    });\r\n  };\r\n\r\n  // -------------------------- filter -------------------------- //\r\n\r\n  proto._filter = function( items ) {\r\n    var filter = this.options.filter;\r\n    filter = filter || '*';\r\n    var matches = [];\r\n    var hiddenMatched = [];\r\n    var visibleUnmatched = [];\r\n\r\n    var test = this._getFilterTest( filter );\r\n\r\n    // test each item\r\n    for ( var i=0; i < items.length; i++ ) {\r\n      var item = items[i];\r\n      if ( item.isIgnored ) {\r\n        continue;\r\n      }\r\n      // add item to either matched or unmatched group\r\n      var isMatched = test( item );\r\n      // item.isFilterMatched = isMatched;\r\n      // add to matches if its a match\r\n      if ( isMatched ) {\r\n        matches.push( item );\r\n      }\r\n      // add to additional group if item needs to be hidden or revealed\r\n      if ( isMatched && item.isHidden ) {\r\n        hiddenMatched.push( item );\r\n      } else if ( !isMatched && !item.isHidden ) {\r\n        visibleUnmatched.push( item );\r\n      }\r\n    }\r\n\r\n    // return collections of items to be manipulated\r\n    return {\r\n      matches: matches,\r\n      needReveal: hiddenMatched,\r\n      needHide: visibleUnmatched\r\n    };\r\n  };\r\n\r\n  // get a jQuery, function, or a matchesSelector test given the filter\r\n  proto._getFilterTest = function( filter ) {\r\n    if ( jQuery && this.options.isJQueryFiltering ) {\r\n      // use jQuery\r\n      return function( item ) {\r\n        return jQuery( item.element ).is( filter );\r\n      };\r\n    }\r\n    if ( typeof filter == 'function' ) {\r\n      // use filter as function\r\n      return function( item ) {\r\n        return filter( item.element );\r\n      };\r\n    }\r\n    // default, use filter as selector string\r\n    return function( item ) {\r\n      return matchesSelector( item.element, filter );\r\n    };\r\n  };\r\n\r\n  // -------------------------- sorting -------------------------- //\r\n\r\n  /**\r\n   * @params {Array} elems\r\n   * @public\r\n   */\r\n  proto.updateSortData = function( elems ) {\r\n    // get items\r\n    var items;\r\n    if ( elems ) {\r\n      elems = utils.makeArray( elems );\r\n      items = this.getItems( elems );\r\n    } else {\r\n      // update all items if no elems provided\r\n      items = this.items;\r\n    }\r\n\r\n    this._getSorters();\r\n    this._updateItemsSortData( items );\r\n  };\r\n\r\n  proto._getSorters = function() {\r\n    var getSortData = this.options.getSortData;\r\n    for ( var key in getSortData ) {\r\n      var sorter = getSortData[ key ];\r\n      this._sorters[ key ] = mungeSorter( sorter );\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @params {Array} items - of Isotope.Items\r\n   * @private\r\n   */\r\n  proto._updateItemsSortData = function( items ) {\r\n    // do not update if no items\r\n    var len = items && items.length;\r\n\r\n    for ( var i=0; len && i < len; i++ ) {\r\n      var item = items[i];\r\n      item.updateSortData();\r\n    }\r\n  };\r\n\r\n  // ----- munge sorter ----- //\r\n\r\n  // encapsulate this, as we just need mungeSorter\r\n  // other functions in here are just for munging\r\n  var mungeSorter = ( function() {\r\n    // add a magic layer to sorters for convienent shorthands\r\n    // `.foo-bar` will use the text of .foo-bar querySelector\r\n    // `[foo-bar]` will use attribute\r\n    // you can also add parser\r\n    // `.foo-bar parseInt` will parse that as a number\r\n    function mungeSorter( sorter ) {\r\n      // if not a string, return function or whatever it is\r\n      if ( typeof sorter != 'string' ) {\r\n        return sorter;\r\n      }\r\n      // parse the sorter string\r\n      var args = trim( sorter ).split(' ');\r\n      var query = args[0];\r\n      // check if query looks like [an-attribute]\r\n      var attrMatch = query.match( /^\\[(.+)\\]$/ );\r\n      var attr = attrMatch && attrMatch[1];\r\n      var getValue = getValueGetter( attr, query );\r\n      // use second argument as a parser\r\n      var parser = Isotope.sortDataParsers[ args[1] ];\r\n      // parse the value, if there was a parser\r\n      sorter = parser ? function( elem ) {\r\n          return elem && parser( getValue( elem ) );\r\n        } :\r\n        // otherwise just return value\r\n        function( elem ) {\r\n          return elem && getValue( elem );\r\n        };\r\n\r\n      return sorter;\r\n    }\r\n\r\n    // get an attribute getter, or get text of the querySelector\r\n    function getValueGetter( attr, query ) {\r\n      // if query looks like [foo-bar], get attribute\r\n      if ( attr ) {\r\n        return function getAttribute( elem ) {\r\n          return elem.getAttribute( attr );\r\n        };\r\n      }\r\n\r\n      // otherwise, assume its a querySelector, and get its text\r\n      return function getChildText( elem ) {\r\n        var child = elem.querySelector( query );\r\n        return child && child.textContent;\r\n      };\r\n    }\r\n\r\n    return mungeSorter;\r\n  })();\r\n\r\n  // parsers used in getSortData shortcut strings\r\n  Isotope.sortDataParsers = {\r\n    'parseInt': function( val ) {\r\n      return parseInt( val, 10 );\r\n    },\r\n    'parseFloat': function( val ) {\r\n      return parseFloat( val );\r\n    }\r\n  };\r\n\r\n  // ----- sort method ----- //\r\n\r\n  // sort filteredItem order\r\n  proto._sort = function() {\r\n    if ( !this.options.sortBy ) {\r\n      return;\r\n    }\r\n    // keep track of sortBy History\r\n    var sortBys = utils.makeArray( this.options.sortBy );\r\n    if ( !this._getIsSameSortBy( sortBys ) ) {\r\n      // concat all sortBy and sortHistory, add to front, oldest goes in last\r\n      this.sortHistory = sortBys.concat( this.sortHistory );\r\n    }\r\n    // sort magic\r\n    var itemSorter = getItemSorter( this.sortHistory, this.options.sortAscending );\r\n    this.filteredItems.sort( itemSorter );\r\n  };\r\n\r\n  // check if sortBys is same as start of sortHistory\r\n  proto._getIsSameSortBy = function( sortBys ) {\r\n    for ( var i=0; i < sortBys.length; i++ ) {\r\n      if ( sortBys[i] != this.sortHistory[i] ) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  // returns a function used for sorting\r\n  function getItemSorter( sortBys, sortAsc ) {\r\n    return function sorter( itemA, itemB ) {\r\n      // cycle through all sortKeys\r\n      for ( var i = 0; i < sortBys.length; i++ ) {\r\n        var sortBy = sortBys[i];\r\n        var a = itemA.sortData[ sortBy ];\r\n        var b = itemB.sortData[ sortBy ];\r\n        if ( a > b || a < b ) {\r\n          // if sortAsc is an object, use the value given the sortBy key\r\n          var isAscending = sortAsc[ sortBy ] !== undefined ? sortAsc[ sortBy ] : sortAsc;\r\n          var direction = isAscending ? 1 : -1;\r\n          return ( a > b ? 1 : -1 ) * direction;\r\n        }\r\n      }\r\n      return 0;\r\n    };\r\n  }\r\n\r\n  // -------------------------- methods -------------------------- //\r\n\r\n  // get layout mode\r\n  proto._mode = function() {\r\n    var layoutMode = this.options.layoutMode;\r\n    var mode = this.modes[ layoutMode ];\r\n    if ( !mode ) {\r\n      // TODO console.error\r\n      throw new Error( 'No layout mode: ' + layoutMode );\r\n    }\r\n    // HACK sync mode's options\r\n    // any options set after init for layout mode need to be synced\r\n    mode.options = this.options[ layoutMode ];\r\n    return mode;\r\n  };\r\n\r\n  proto._resetLayout = function() {\r\n    // trigger original reset layout\r\n    Outlayer.prototype._resetLayout.call( this );\r\n    this._mode()._resetLayout();\r\n  };\r\n\r\n  proto._getItemLayoutPosition = function( item  ) {\r\n    return this._mode()._getItemLayoutPosition( item );\r\n  };\r\n\r\n  proto._manageStamp = function( stamp ) {\r\n    this._mode()._manageStamp( stamp );\r\n  };\r\n\r\n  proto._getContainerSize = function() {\r\n    return this._mode()._getContainerSize();\r\n  };\r\n\r\n  proto.needsResizeLayout = function() {\r\n    return this._mode().needsResizeLayout();\r\n  };\r\n\r\n  // -------------------------- adding & removing -------------------------- //\r\n\r\n  // HEADS UP overwrites default Outlayer appended\r\n  proto.appended = function( elems ) {\r\n    var items = this.addItems( elems );\r\n    if ( !items.length ) {\r\n      return;\r\n    }\r\n    // filter, layout, reveal new items\r\n    var filteredItems = this._filterRevealAdded( items );\r\n    // add to filteredItems\r\n    this.filteredItems = this.filteredItems.concat( filteredItems );\r\n  };\r\n\r\n  // HEADS UP overwrites default Outlayer prepended\r\n  proto.prepended = function( elems ) {\r\n    var items = this._itemize( elems );\r\n    if ( !items.length ) {\r\n      return;\r\n    }\r\n    // start new layout\r\n    this._resetLayout();\r\n    this._manageStamps();\r\n    // filter, layout, reveal new items\r\n    var filteredItems = this._filterRevealAdded( items );\r\n    // layout previous items\r\n    this.layoutItems( this.filteredItems );\r\n    // add to items and filteredItems\r\n    this.filteredItems = filteredItems.concat( this.filteredItems );\r\n    this.items = items.concat( this.items );\r\n  };\r\n\r\n  proto._filterRevealAdded = function( items ) {\r\n    var filtered = this._filter( items );\r\n    this.hide( filtered.needHide );\r\n    // reveal all new items\r\n    this.reveal( filtered.matches );\r\n    // layout new items, no transition\r\n    this.layoutItems( filtered.matches, true );\r\n    return filtered.matches;\r\n  };\r\n\r\n  /**\r\n   * Filter, sort, and layout newly-appended item elements\r\n   * @param {Array or NodeList or Element} elems\r\n   */\r\n  proto.insert = function( elems ) {\r\n    var items = this.addItems( elems );\r\n    if ( !items.length ) {\r\n      return;\r\n    }\r\n    // append item elements\r\n    var i, item;\r\n    var len = items.length;\r\n    for ( i=0; i < len; i++ ) {\r\n      item = items[i];\r\n      this.element.appendChild( item.element );\r\n    }\r\n    // filter new stuff\r\n    var filteredInsertItems = this._filter( items ).matches;\r\n    // set flag\r\n    for ( i=0; i < len; i++ ) {\r\n      items[i].isLayoutInstant = true;\r\n    }\r\n    this.arrange();\r\n    // reset flag\r\n    for ( i=0; i < len; i++ ) {\r\n      delete items[i].isLayoutInstant;\r\n    }\r\n    this.reveal( filteredInsertItems );\r\n  };\r\n\r\n  var _remove = proto.remove;\r\n  proto.remove = function( elems ) {\r\n    elems = utils.makeArray( elems );\r\n    var removeItems = this.getItems( elems );\r\n    // do regular thing\r\n    _remove.call( this, elems );\r\n    // bail if no items to remove\r\n    var len = removeItems && removeItems.length;\r\n    // remove elems from filteredItems\r\n    for ( var i=0; len && i < len; i++ ) {\r\n      var item = removeItems[i];\r\n      // remove item from collection\r\n      utils.removeFrom( this.filteredItems, item );\r\n    }\r\n  };\r\n\r\n  proto.shuffle = function() {\r\n    // update random sortData\r\n    for ( var i=0; i < this.items.length; i++ ) {\r\n      var item = this.items[i];\r\n      item.sortData.random = Math.random();\r\n    }\r\n    this.options.sortBy = 'random';\r\n    this._sort();\r\n    this._layout();\r\n  };\r\n\r\n  /**\r\n   * trigger fn without transition\r\n   * kind of hacky to have this in the first place\r\n   * @param {Function} fn\r\n   * @param {Array} args\r\n   * @returns ret\r\n   * @private\r\n   */\r\n  proto._noTransition = function( fn, args ) {\r\n    // save transitionDuration before disabling\r\n    var transitionDuration = this.options.transitionDuration;\r\n    // disable transition\r\n    this.options.transitionDuration = 0;\r\n    // do it\r\n    var returnValue = fn.apply( this, args );\r\n    // re-enable transition for reveal\r\n    this.options.transitionDuration = transitionDuration;\r\n    return returnValue;\r\n  };\r\n\r\n  // ----- helper methods ----- //\r\n\r\n  /**\r\n   * getter method for getting filtered item elements\r\n   * @returns {Array} elems - collection of item elements\r\n   */\r\n  proto.getFilteredItemElements = function() {\r\n    return this.filteredItems.map( function( item ) {\r\n      return item.element;\r\n    });\r\n  };\r\n\r\n  // -----  ----- //\r\n\r\n  return Isotope;\r\n\r\n}));\r\n"],"names":["window","factory","define","jQuery","arraySlice","Array","prototype","slice","console","logError","message","error","jQueryBridget","namespace","PluginClass","$","methodCall","$elems","methodName","args","returnValue","pluginMethodStr","each","i","elem","instance","data","method","charAt","value","apply","undefined","plainCall","options","option","_init","opts","isPlainObject","this","extend","fn","arg0","call","arguments","updateJQuery","bridget","global","EvEmitter","proto","on","eventName","listener","events","_events","listeners","indexOf","push","once","onceEvents","_onceEvents","onceListeners","off","length","index","splice","emitEvent","isOnce","allOff","getStyleSize","num","parseFloat","isValid","isNaN","noop","measurements","measurementsLength","getZeroSize","size","width","height","innerWidth","innerHeight","outerWidth","outerHeight","measurement","getStyle","style","getComputedStyle","isBoxSizeOuter","isSetup","setup","div","document","createElement","padding","borderStyle","borderWidth","boxSizing","body","documentElement","appendChild","Math","round","getSize","removeChild","querySelector","nodeType","display","offsetWidth","offsetHeight","isBorderBox","paddingWidth","paddingLeft","paddingRight","paddingHeight","paddingTop","paddingBottom","marginWidth","marginLeft","marginRight","marginHeight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderHeight","borderTopWidth","borderBottomWidth","isBorderBoxSizeOuter","styleWidth","styleHeight","matchesMethod","ElemProto","Element","matches","matchesSelector","prefixes","prefix","selector","utils","a","b","prop","makeArray","obj","isArray","isArrayLike","removeFrom","ary","getParent","parentNode","getQueryElement","handleEvent","event","type","filterFindElements","elems","ffElems","forEach","HTMLElement","childElems","querySelectorAll","debounceMethod","_class","threshold","timeoutName","timeout","clearTimeout","_this","setTimeout","docReady","callback","readyState","addEventListener","toDashed","str","replace","match","$1","$2","toLowerCase","htmlInit","WidgetClass","dashedNamespace","dataAttr","dataAttrElems","jsDashElems","concat","dataOptionsAttr","attr","getAttribute","JSON","parse","className","isEmptyObj","docElemStyle","transitionProperty","transition","transformProperty","transform","transitionEndEvent","WebkitTransition","vendorProperties","transitionDuration","transitionDelay","Item","element","layout","position","x","y","_create","Object","create","toDashedAll","constructor","_transn","ingProperties","clean","onEnd","css","elemStyle","supportedProp","getPosition","isOriginLeft","_getOption","isOriginTop","xValue","yValue","layoutSize","layoutPosition","xPadding","xProperty","xResetProperty","getXValue","yPadding","yProperty","yResetProperty","getYValue","isHorizontal","percentPosition","_transitionTo","curX","curY","didNotMove","setPosition","isTransitioning","transX","transY","transitionStyle","getTranslate","to","onTransitionEnd","isCleaning","goTo","moveTo","_nonTransition","_removeStyles","_transition","from","enableTransition","transitionProps","duration","staggerDelay","onwebkitTransitionEnd","ontransitionend","onotransitionend","dashedVendorProperties","target","propertyName","disableTransition","removeTransitionStyles","removeEventListener","cleanStyle","cleanTransitionStyle","stagger","delay","removeElem","remove","hide","reveal","isHidden","transitionEndProperty","getHideRevealTransitionEndProperty","onRevealTransitionEnd","hiddenStyle","visibleStyle","styleProperty","optionStyle","opacity","onHideTransitionEnd","destroy","left","right","top","bottom","GUID","instances","Outlayer","queryElement","$element","defaults","id","outlayerGUID","isInitLayout","containerStyle","initLayout","originLeft","originTop","resize","resizeContainer","subclass","Parent","SubClass","oldOption","compatOptions","horizontal","layoutInstant","reloadItems","stamps","stamp","canBindResize","bindResize","items","_itemize","children","itemElems","_filterFindItemElements","item","itemSelector","getItemElements","map","_resetLayout","_manageStamps","isInstant","_isLayoutInited","layoutItems","_getMeasurement","_getItemsForLayout","_layoutItems","_postLayout","filter","isIgnored","_emitCompleteOnItems","queue","_getItemLayoutPosition","isLayoutInstant","_processLayoutQueue","updateStagger","_positionItem","getMilliseconds","isResizingContainer","_getContainerSize","_setContainerMeasure","measure","isWidth","elemSize","max","onComplete","dispatchEvent","count","doneCount","tick","emitArgs","$event","Event","trigger","ignore","getItem","unignore","_find","unstamp","_getBoundingRect","_manageStamp","boundingRect","getBoundingClientRect","_boundingRect","_getElementOffset","thisRect","offset","isResizeBound","unbindResize","onresize","needsResizeLayout","hasSizes","addItems","appended","prepended","previousItems","revealItemElements","getItems","hideItemElements","removeItems","removeData","Layout","msUnits","ms","s","time","unit","mult","itemGUID","sortData","updateSortData","random","getSortData","sorters","_sorters","key","sorter","_destroy","LayoutMode","isotope","filteredItems","facadeMethods","needsVerticalResizeLayout","getColumnWidth","getSegmentSize","getRowHeight","segment","segmentName","outerSize","firstItemSize","getFirstItemSize","firstItem","modes","Mode","Masonry","fitWidth","measureColumns","colYs","cols","maxY","horizontalColIndex","getContainerWidth","columnWidth","firstItemElem","containerWidth","gutter","excess","mathMethod","isFitWidth","container","remainder","colSpan","min","colPosMethod","horizontalOrder","colPosition","col","setHeight","setMax","_getTopColPosition","colGroup","_getTopColGroup","minimumY","groupCount","_getColGroupY","groupColYs","_getHorizontalColPosition","isOver","hasSize","stampSize","firstX","lastX","firstCol","floor","lastCol","stampMaxY","_getContainerFitWidth","unusedCols","previousWidth","MasonryMode","keepModeMethods","FitRows","itemWidth","Vertical","horizontalAlignment","trim","String","Isotope","layoutMode","isJQueryFiltering","sortAscending","name","_getSorters","sortHistory","_initLayoutMode","_updateItemsSortData","initialOpts","_layout","arrange","_getIsInstant","filtered","_filter","_bindArrangeComplete","_isInstant","_noTransition","_hideReveal","_sort","needReveal","needHide","isLayoutComplete","isHideComplete","isRevealComplete","arrangeParallelCallback","hiddenMatched","visibleUnmatched","test","_getFilterTest","isMatched","is","mungeSorter","len","split","query","attrMatch","getValue","getValueGetter","parser","sortDataParsers","child","textContent","getItemSorter","sortBys","sortAsc","itemA","itemB","sortBy","isAscending","direction","val","parseInt","_getIsSameSortBy","itemSorter","sort","_mode","mode","Error","_filterRevealAdded","insert","filteredInsertItems","_remove","shuffle","getFilteredItemElements"],"sourceRoot":""}