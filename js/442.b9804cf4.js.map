{"version":3,"file":"js/442.b9804cf4.js","mappings":"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","sources":["webpack://snippets-admin/./src/views/draggable/index.vue","webpack://snippets-admin/./src/directives/draggable.js","webpack://snippets-admin/src/views/draggable/index.vue","webpack://snippets-admin/./src/views/draggable/index.vue?0c39","webpack://snippets-admin/./src/views/draggable/index.vue?9bff","webpack://snippets-admin/./src/directives/draggable.txt"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page\"},[_c('h4',[_vm._v(\"Draggable(Relative to the viewport)\")]),_c('div',{staticClass:\"draggable-area\"},[_c('div',{directives:[{name:\"draggable\",rawName:\"v-draggable.sticky\",modifiers:{\"sticky\":true}}],staticClass:\"box\"})]),_c('div',{staticClass:\"source\"},[_c('pre',{staticClass:\"mb-0\"},[_vm._v(\"// template\\n<div class=\\\"box\\\" v-draggable.sticky></div>\\n===============================================================\\n// js\\n\"+_vm._s(_vm.content)+\"\\n      \")])]),_c('h4',{staticClass:\"mt-5\"},[_vm._v(\"Parent Boundary\")]),_c('div',{ref:\"boundary\",staticClass:\"border draggable-area\"},[_c('div',{directives:[{name:\"draggable\",rawName:\"v-draggable.sticky\",value:(_vm.handlerDrag),expression:\"handlerDrag\",modifiers:{\"sticky\":true}}],staticClass:\"box\"})]),_vm._m(0)])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"source\"},[_c('pre',{staticClass:\"mb-0\"},[_vm._v(\" // template\\n<div class=\\\"box\\\" v-draggable.sticky=\\\"handlerDrag\\\"></div>\\n===============================================================\\n// script\\nmethods: {\\n  handlerDrag (config) {\\n    const parent = this.$refs.boundary\\n    const { x, y, width, height } = parent.getBoundingClientRect()\\n    const target = config.target\\n\\n    const left = config.x - x\\n    const top = config.y - y\\n    parent.style.position = 'relative'\\n    target.style.cssText = `\\n      position: absolute;\\n      left: ${left}px;\\n      top: ${top}px;\\n      width: ${config.rect.width}px;\\n      height: ${config.rect.height}px;\\n    `\\n    const m = width - config.rect.width\\n    const n = height - config.rect.height\\n\\n    target.style.left = (Math.min(Math.max(left, 0), m)) + 'px'\\n    target.style.top = (Math.min(Math.max(top, 0), n)) + 'px'\\n  },\\n},\\n      \")])])\n}]\n\nexport { render, staticRenderFns }","let seed = 0\r\nconst ctx = '@@draggableContext'\r\nconst isMobile = /mobile/i.test(window.navigator.userAgent)\r\nconst EVENT = {\r\n  MOUSE_DOWN: isMobile ? 'touchstart' : 'mousedown',\r\n  MOUSE_MOVE: isMobile ? 'touchmove' : 'mousemove',\r\n  MOUSE_UP: isMobile ? 'touchend' : 'mouseup'\r\n}\r\n\r\nfunction handleMousedown (event) {\r\n  if (isMobile) {\r\n    event.preventDefault()\r\n  }\r\n  const el = this\r\n  const rect = el.getBoundingClientRect()\r\n\r\n  el.style.position = 'fixed'\r\n\r\n  Object.assign(el[ctx], {\r\n    type: EVENT.MOUSE_DOWN,\r\n    rect: rect,\r\n    x: rect.x || rect.left,\r\n    y: rect.y || rect.top,\r\n    dragstartX: isMobile ? event.touches[0].clientX : event.clientX, // 鼠标按下时坐标\r\n    dragstartY: isMobile ? event.touches[0].clientY : event.clientY,\r\n    dragendX: undefined, // 鼠标松开时坐标\r\n    dragendY: undefined,\r\n    startX: isMobile ? event.touches[0].clientX : event.clientX, // 起点坐标\r\n    startY: isMobile ? event.touches[0].clientY : event.clientY,\r\n    dragging: true,\r\n    isMove: false,\r\n  })\r\n\r\n  callback(el)\r\n\r\n  window.addEventListener(EVENT.MOUSE_MOVE, el[ctx]._handleMousemove, false)\r\n  window.addEventListener(EVENT.MOUSE_UP, el[ctx]._handleMouseup, false)\r\n}\r\n\r\nfunction handleMousemove (el) {\r\n  return function (event) {\r\n    if (!isMobile) {\r\n      event.preventDefault()\r\n    }\r\n\r\n    if (event.target === document.documentElement) return\r\n\r\n    const current = {\r\n      x: isMobile ? event.touches[0].clientX : event.clientX,\r\n      y: isMobile ? event.touches[0].clientY : event.clientY,\r\n    }\r\n\r\n    const diff = {\r\n      x: current.x - el[ctx].startX,\r\n      y: current.y - el[ctx].startY,\r\n    }\r\n\r\n    if (el[ctx].binding.modifiers.sticky) {\r\n      // 不会拖出屏幕边缘\r\n      const clientWidth = document.documentElement.clientWidth\r\n      const clientHeight = document.documentElement.clientHeight\r\n\r\n      const {\r\n        x,\r\n        y,\r\n        rect: {\r\n          width,\r\n          height\r\n        },\r\n      } = el[ctx]\r\n\r\n      if (diff.x < 0 && x + diff.x <= 0) {\r\n        el[ctx].x = 0\r\n      } else if (diff.x > 0 && x + width - clientWidth >= 0) {\r\n        el[ctx].x = clientWidth - width\r\n      } else {\r\n        el[ctx].x += diff.x\r\n      }\r\n\r\n      if (diff.y < 0 && y + diff.y <= 0) {\r\n        el[ctx].y = 0\r\n      } else if (diff.y > 0 && y + height - clientHeight >= 0) {\r\n        el[ctx].y = clientHeight - height\r\n      } else {\r\n        el[ctx].y += diff.y\r\n      }\r\n    } else {\r\n      el[ctx].x += diff.x\r\n      el[ctx].y += diff.y\r\n    }\r\n\r\n    Object.assign(el[ctx], {\r\n      type: EVENT.MOUSE_MOVE,\r\n      startX: current.x,\r\n      startY: current.y,\r\n      diffX: diff.x,\r\n      diffY: diff.y,\r\n      isMove: true,\r\n    })\r\n\r\n    callback(el)\r\n  }\r\n}\r\n\r\nfunction handleMouseup (el) {\r\n  return function (event) {\r\n    if (!isMobile) {\r\n      event.preventDefault()\r\n    }\r\n\r\n    const lastType = el[ctx].type\r\n\r\n    Object.assign(el[ctx], {\r\n      type: EVENT.MOUSE_UP,\r\n      dragendX: isMobile ? el[ctx].startX : event.clientX, // 鼠标按下时坐标\r\n      dragendY: isMobile ? el[ctx].startY : event.clientY,\r\n      dragging: false,\r\n      isMove: lastType === EVENT.MOUSE_MOVE,\r\n    })\r\n\r\n    callback(el)\r\n\r\n    window.removeEventListener(EVENT.MOUSE_MOVE, el[ctx]._handleMousemove, false)\r\n    window.removeEventListener(EVENT.MOUSE_UP, el[ctx]._handleMouseup, false)\r\n  }\r\n}\r\n\r\nfunction callback (el) {\r\n  const bindingFn = el[ctx]?.binding?.value\r\n  if (typeof bindingFn === 'function') {\r\n    bindingFn({\r\n      ...el[ctx],\r\n      target: el\r\n    })\r\n  } else {\r\n    const {\r\n      x,\r\n      y,\r\n      rect,\r\n      dragging\r\n    } = el[ctx]\r\n    if (!dragging) return\r\n    el.style.cssText = `\r\n      position: fixed;\r\n      left: ${x}px;\r\n      top: ${y}px;\r\n      width: ${rect.width}px;\r\n      height: ${rect.height}px;\r\n    `\r\n  }\r\n}\r\n\r\n/**\r\n * v-draggable\r\n * @desc\r\n * @example\r\n * ```vue\r\n * <div v-draggable>\r\n *\r\n * <div v-draggable.sticky>\r\n * <div v-draggable=\"handleDraggable\">\r\n * ```\r\n */\r\nexport default {\r\n  bind (el, binding, vnode) {\r\n    const id = seed++\r\n    el[ctx] = {\r\n      id,\r\n      binding,\r\n      vnode,\r\n      _handleMousemove: handleMousemove(el, binding, vnode),\r\n      _handleMouseup: handleMouseup(el, binding, vnode),\r\n    }\r\n\r\n    el.addEventListener(EVENT.MOUSE_DOWN, handleMousedown, false)\r\n  },\r\n\r\n  unbind (el) {\r\n    window.removeEventListener(EVENT.MOUSE_MOVE, el[ctx]._handleMousemove, false)\r\n    window.removeEventListener(EVENT.MOUSE_UP, el[ctx]._handleMouseup, false)\r\n    el.removeEventListener(EVENT.MOUSE_DOWN, handleMousedown, false)\r\n    delete el[ctx]\r\n  },\r\n}\r\n","<template>\r\n  <div class=\"page\">\r\n    <h4>Draggable(Relative to the viewport)</h4>\r\n    <div class=\"draggable-area\">\r\n      <div class=\"box\" v-draggable.sticky></div>\r\n    </div>\r\n    <div class=\"source\">\r\n      <pre class=\"mb-0\">\r\n// template\r\n&lt;div class=\"box\" v-draggable.sticky&gt;&lt;/div&gt;\r\n===============================================================\r\n// js\r\n{{content}}\r\n      </pre>\r\n    </div>\r\n    <h4 class=\"mt-5\">Parent Boundary</h4>\r\n    <div class=\"border draggable-area\" ref=\"boundary\">\r\n      <div class=\"box\" v-draggable.sticky=\"handlerDrag\"></div>\r\n    </div>\r\n    <div class=\"source\">\r\n      <pre class=\"mb-0\">\r\n // template\r\n&lt;div class=\"box\" v-draggable.sticky=\"handlerDrag\"&gt;&lt;/div&gt;\r\n===============================================================\r\n// script\r\nmethods: {\r\n  handlerDrag (config) {\r\n    const parent = this.$refs.boundary\r\n    const { x, y, width, height } = parent.getBoundingClientRect()\r\n    const target = config.target\r\n\r\n    const left = config.x - x\r\n    const top = config.y - y\r\n    parent.style.position = 'relative'\r\n    target.style.cssText = `\r\n      position: absolute;\r\n      left: ${left}px;\r\n      top: ${top}px;\r\n      width: ${config.rect.width}px;\r\n      height: ${config.rect.height}px;\r\n    `\r\n    const m = width - config.rect.width\r\n    const n = height - config.rect.height\r\n\r\n    target.style.left = (Math.min(Math.max(left, 0), m)) + 'px'\r\n    target.style.top = (Math.min(Math.max(top, 0), n)) + 'px'\r\n  },\r\n},\r\n      </pre>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Draggable from '@/directives/draggable'\r\nimport draggableText from '@/directives/draggable.txt'\r\n\r\nexport default {\r\n  name: 'draggable-index',\r\n  directives: {\r\n    draggable: Draggable,\r\n  },\r\n  data () {\r\n    return {\r\n      content: draggableText,\r\n    }\r\n  },\r\n  methods: {\r\n    handlerDrag (config) {\r\n      const parent = this.$refs.boundary\r\n      const { x, y, width, height } = parent.getBoundingClientRect()\r\n      const target = config.target\r\n\r\n      const left = config.x - x\r\n      const top = config.y - y\r\n      parent.style.position = 'relative'\r\n      target.style.cssText = `\r\n        position: absolute;\r\n        left: ${left}px;\r\n        top: ${top}px;\r\n        width: ${config.rect.width}px;\r\n        height: ${config.rect.height}px;\r\n      `\r\n      const m = width - config.rect.width\r\n      const n = height - config.rect.height\r\n\r\n      target.style.left = (Math.min(Math.max(left, 0), m)) + 'px'\r\n      target.style.top = (Math.min(Math.max(top, 0), n)) + 'px'\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/assets/style/mixins.scss\";\r\n\r\n.box {\r\n  width: 60px;\r\n  height: 60px;\r\n  background-color: $gray-200;\r\n  //position: fixed;\r\n  //left: 50%;\r\n  //top: 20%;\r\n}\r\n.draggable-area {\r\n  height: var(--draggable-height);\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=16f892f2&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=16f892f2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16f892f2\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"let seed = 0\\r\\nconst ctx = '@@draggableContext'\\r\\nconst isMobile = /mobile/i.test(window.navigator.userAgent)\\r\\nconst EVENT = {\\r\\n  MOUSE_DOWN: isMobile ? 'touchstart' : 'mousedown',\\r\\n  MOUSE_MOVE: isMobile ? 'touchmove' : 'mousemove',\\r\\n  MOUSE_UP: isMobile ? 'touchend' : 'mouseup'\\r\\n}\\r\\n\\r\\nfunction handleMousedown (event) {\\r\\n  if (isMobile) {\\r\\n    event.preventDefault()\\r\\n  }\\r\\n  const el = this\\r\\n  const rect = el.getBoundingClientRect()\\r\\n\\r\\n  el.style.position = 'fixed'\\r\\n\\r\\n  Object.assign(el[ctx], {\\r\\n    type: EVENT.MOUSE_DOWN,\\r\\n    rect: rect,\\r\\n    x: rect.x || rect.left,\\r\\n    y: rect.y || rect.top,\\r\\n    dragstartX: isMobile ? event.touches[0].clientX : event.clientX, // 鼠标按下时坐标\\r\\n    dragstartY: isMobile ? event.touches[0].clientY : event.clientY,\\r\\n    dragendX: undefined, // 鼠标松开时坐标\\r\\n    dragendY: undefined,\\r\\n    startX: isMobile ? event.touches[0].clientX : event.clientX, // 起点坐标\\r\\n    startY: isMobile ? event.touches[0].clientY : event.clientY,\\r\\n    dragging: true,\\r\\n    isMove: false,\\r\\n  })\\r\\n\\r\\n  callback(el)\\r\\n\\r\\n  window.addEventListener(EVENT.MOUSE_MOVE, el[ctx]._handleMousemove, false)\\r\\n  window.addEventListener(EVENT.MOUSE_UP, el[ctx]._handleMouseup, false)\\r\\n}\\r\\n\\r\\nfunction handleMousemove (el) {\\r\\n  return function (event) {\\r\\n    if (!isMobile) {\\r\\n      event.preventDefault()\\r\\n    }\\r\\n\\r\\n    if (event.target === document.documentElement) return\\r\\n\\r\\n    const current = {\\r\\n      x: isMobile ? event.touches[0].clientX : event.clientX,\\r\\n      y: isMobile ? event.touches[0].clientY : event.clientY,\\r\\n    }\\r\\n\\r\\n    const diff = {\\r\\n      x: current.x - el[ctx].startX,\\r\\n      y: current.y - el[ctx].startY,\\r\\n    }\\r\\n\\r\\n    if (el[ctx].binding.modifiers.sticky) {\\r\\n      // 不会拖出屏幕边缘\\r\\n      const clientWidth = document.documentElement.clientWidth\\r\\n      const clientHeight = document.documentElement.clientHeight\\r\\n\\r\\n      const {\\r\\n        x,\\r\\n        y,\\r\\n        rect: {\\r\\n          width,\\r\\n          height\\r\\n        },\\r\\n      } = el[ctx]\\r\\n\\r\\n      if (diff.x < 0 && x + diff.x <= 0) {\\r\\n        el[ctx].x = 0\\r\\n      } else if (diff.x > 0 && x + width - clientWidth >= 0) {\\r\\n        el[ctx].x = clientWidth - width\\r\\n      } else {\\r\\n        el[ctx].x += diff.x\\r\\n      }\\r\\n\\r\\n      if (diff.y < 0 && y + diff.y <= 0) {\\r\\n        el[ctx].y = 0\\r\\n      } else if (diff.y > 0 && y + height - clientHeight >= 0) {\\r\\n        el[ctx].y = clientHeight - height\\r\\n      } else {\\r\\n        el[ctx].y += diff.y\\r\\n      }\\r\\n    } else {\\r\\n      el[ctx].x += diff.x\\r\\n      el[ctx].y += diff.y\\r\\n    }\\r\\n\\r\\n    Object.assign(el[ctx], {\\r\\n      type: EVENT.MOUSE_MOVE,\\r\\n      startX: current.x,\\r\\n      startY: current.y,\\r\\n      diffX: diff.x,\\r\\n      diffY: diff.y,\\r\\n      isMove: true,\\r\\n    })\\r\\n\\r\\n    callback(el)\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction handleMouseup (el) {\\r\\n  return function (event) {\\r\\n    if (!isMobile) {\\r\\n      event.preventDefault()\\r\\n    }\\r\\n\\r\\n    const lastType = el[ctx].type\\r\\n\\r\\n    Object.assign(el[ctx], {\\r\\n      type: EVENT.MOUSE_UP,\\r\\n      dragendX: isMobile ? el[ctx].startX : event.clientX, // 鼠标按下时坐标\\r\\n      dragendY: isMobile ? el[ctx].startY : event.clientY,\\r\\n      dragging: false,\\r\\n      isMove: lastType === EVENT.MOUSE_MOVE,\\r\\n    })\\r\\n\\r\\n    callback(el)\\r\\n\\r\\n    window.removeEventListener(EVENT.MOUSE_MOVE, el[ctx]._handleMousemove, false)\\r\\n    window.removeEventListener(EVENT.MOUSE_UP, el[ctx]._handleMouseup, false)\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction callback (el) {\\r\\n  const bindingFn = el[ctx]?.binding?.value\\r\\n  if (typeof bindingFn === 'function') {\\r\\n    bindingFn({\\r\\n      ...el[ctx],\\r\\n      target: el\\r\\n    })\\r\\n  } else {\\r\\n    const {\\r\\n      x,\\r\\n      y,\\r\\n      rect,\\r\\n      dragging\\r\\n    } = el[ctx]\\r\\n    if (!dragging) return\\r\\n    el.style.cssText = `\\r\\n      position: fixed;\\r\\n      left: ${x}px;\\r\\n      top: ${y}px;\\r\\n      width: ${rect.width}px;\\r\\n      height: ${rect.height}px;\\r\\n    `\\r\\n  }\\r\\n}\\r\\n\\r\\n/**\\r\\n * v-draggable\\r\\n * @desc\\r\\n * @example\\r\\n * ```vue\\r\\n * <div v-draggable>\\r\\n *\\r\\n * <div v-draggable.sticky>\\r\\n * <div v-draggable=\\\"handleDraggable\\\">\\r\\n * ```\\r\\n */\\r\\nexport default {\\r\\n  bind (el, binding, vnode) {\\r\\n    const id = seed++\\r\\n    el[ctx] = {\\r\\n      id,\\r\\n      binding,\\r\\n      vnode,\\r\\n      _handleMousemove: handleMousemove(el, binding, vnode),\\r\\n      _handleMouseup: handleMouseup(el, binding, vnode),\\r\\n    }\\r\\n\\r\\n    el.addEventListener(EVENT.MOUSE_DOWN, handleMousedown, false)\\r\\n  },\\r\\n\\r\\n  unbind (el) {\\r\\n    window.removeEventListener(EVENT.MOUSE_MOVE, el[ctx]._handleMousemove, false)\\r\\n    window.removeEventListener(EVENT.MOUSE_UP, el[ctx]._handleMouseup, false)\\r\\n    el.removeEventListener(EVENT.MOUSE_DOWN, handleMousedown, false)\\r\\n    delete el[ctx]\\r\\n  },\\r\\n}\\r\\n\";"],"names":["render","_vm","this","_c","_self","staticClass","_v","directives","name","rawName","modifiers","_s","content","ref","value","handlerDrag","expression","_m","staticRenderFns","seed","ctx","isMobile","test","window","navigator","userAgent","EVENT","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","handleMousedown","event","preventDefault","el","rect","getBoundingClientRect","style","position","Object","assign","type","x","left","y","top","dragstartX","touches","clientX","dragstartY","clientY","dragendX","undefined","dragendY","startX","startY","dragging","isMove","callback","addEventListener","_handleMousemove","_handleMouseup","handleMousemove","target","document","documentElement","current","diff","binding","sticky","clientWidth","clientHeight","width","height","diffX","diffY","handleMouseup","lastType","removeEventListener","bindingFn","cssText","bind","vnode","id","unbind","draggable","Draggable","data","draggableText","methods","config","parent","$refs","boundary","m","n","Math","min","max","component","module","exports"],"sourceRoot":""}